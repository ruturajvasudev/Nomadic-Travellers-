var tpr=tpr||{};tpr.util=function(){"use strict";function a(a){var b=new RegExp(a+"=([^&]*)","i").exec(window.location.search);return b&&unescape(b[1])||""}function b(a){for(var b,c={},d=a.split("&"),e=0;e<d.length;e++)b=d[e].split("="),c[b[0]]=b[1];return c}function c(a,b){var c="",d="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789abcdefghijklmnopqrstuvwxyz";a=a||6,b=b||"rand_";for(var e=0;a>e;e++)c+=d.charAt(Math.floor(Math.random()*d.length));return b+c+parseInt(Date.now()).toString(32)}function d(a){a||(a=$(document));var b=a.find(".js-countDownTimer");b.length&&b.each(function(){e($(this))})}function e(a,b){var c=parseInt(a.data("seconds")||0);if(c){var d=a.find(".js-day"),e=a.find(".js-hour"),f=a.find(".js-minute"),g=a.find(".js-seconds"),h=new CountdownTimer({seconds:c,onTick:function(){d.length&&(h.fDays?d.text(h.fDays).show():d.hide()),e.text(h.fHours),f.text(h.fHMins),g.text(h.fSecs)},onComplete:function(){b&&b()}});h.start()}}return{getUrlParam:a,getURIParams:b,genRandID:c,startCountdownTimers:d,startCountdownTimer:e}}();var tpr=tpr||{};tpr.cfg=function(){"use strict";function a(a){return d.hasOwnProperty(a)}function b(b,c){return a(b)?d[b]:"undefined"!=typeof c?c:void 0}function c(a,b){d[a]=b}var d={},e={};return e=function(a,d){return 1===arguments.length?b(a):void(2===arguments.length&&c(a,d))},e.get=b,e.set=c,e}(),tpr.store=tpr.cfg,tpr.config=tpr.cfg,tpr.track=function(){"use strict";function a(a){a=_.extend({category:!1,action:"clicked",label:!1,value:!1},a||{}),a.category&&a.label&&"undefined"!=typeof ga&&ga("send","event",a.category,a.action,a.label,a.value)}function b(a,b){a&&"undefined"!=typeof nudgespot&&((_.isUndefined(b)||!_.isObject(b))&&(b={}),nudgespot.track(a,b))}function c(a,b){a&&"undefined"!=typeof ll&&((_.isUndefined(b)||!_.isObject(b))&&(b={}),ll("tagEvent",a,b))}function d(a){return a.replace(/\s+/g,"_").toLowerCase()}function e(e){if(e&&"object"!=typeof e)try{e=$.parseJSON(e)}catch(f){e=!1}if(e){if(_.has(e,"ga")&&a(e.ga),_.has(e,"ns")){var g=e.ns.e||!1,h=_.omit(e.ns,"e");b(g,h)}if(_.has(e,"ll")){var i=e.ll.e||!1,j=_.omit(e.ll,"e");c(i,j)}if(_.has(e,"ev")){var k=e.ev.e||!1,l=_.omit(e.ev,"e");c(k,l),b(d(k),l)}}}var f=".-trk",g=".-ctrk";return $(document).on("click",f,function(a){var b=$(a.target).closest(f),c=b.data("trk")||!1;e(c)}),$(document).on("click",g,function(a){var b=$(a.target).closest(g),c=b.data("trk");c&&_.isFunction(Cookies)&&Cookies.set("_ctrk",JSON.stringify(c),{expires:30})}),$(function(){if(_.isFunction(Cookies)){var a=Cookies.get("_ctrk")||!1;if(Cookies.expire("_ctrk"),a&&"object"!=typeof a)try{a=$.parseJSON(a)}catch(b){a=!1}a&&e(a)}}),{sendEvent:e,sendGAEvent:a,sendNSEvent:b,sendLLEvent:c}}(),function(){var a=".-ref",b={logotop:{category:"Logo",label:"top"},logobtm:{category:"Logo",label:"bottom"},engtop:{category:"Courses",label:"Engineering-top"},medtop:{category:"Courses",label:"Medical-top"},fndtop:{category:"Courses",label:"Foundation-top"},pricingtop:{category:"Links",label:"Pricing-top"},apptop:{category:"Links",label:"App-top"},blogtop:{category:"Links",label:"Blog-top"},bytestop:{category:"Links",label:"Bytes-top"},discusstop:{category:"Links",label:"Discuss-top"},engbtm:{category:"Courses",label:"Engineering-bottom"},medbtm:{category:"Courses",label:"Medical-bottom"},fndbtm:{category:"Courses",label:"Foundation-bottom"},tsbtm:{category:"Courses",label:"Test-series-bottom"},pricingbtm:{category:"Courses",label:"Pricing-bottom"},parentsbtm:{category:"Links",label:"Parents-bottom"},teachersbtm:{category:"Links",label:"Teachers-bottom"},teambtm:{category:"Courses",label:"Team-bottom"},blogbtm:{category:"Courses",label:"Blog-bottom"},bytesbtm:{category:"Courses",label:"Bytes-bottom"},discussbtm:{category:"Courses",label:"Discuss-bottom"},contactbtm:{category:"Courses",label:"Contact-bottom"},faqbtm:{category:"Courses",label:"FAQ-bottom"},jobsbtm:{category:"Courses",label:"Jobs-bottom"},smebtm:{category:"Courses",label:"SME-bottom"},tosbtm:{category:"Courses",label:"Terms-bottom"},ppbtm:{category:"Courses",label:"Privacy-policy-bottom"},jobabt:{category:"Courses",label:"Jobs-AboutUs"},exp_eng_home:{category:"Explore",action:"Explore Course",label:"Enggineering-Home"},exp_med_home:{category:"Explore",action:"Explore Course",label:"Medical-Home"},exp_fnd_home:{category:"Explore",action:"Explore Course",label:"Foundation-Home"},exp_eng_course:{category:"Explore",action:"Explore Course",label:"Enggineering-Course Page"},exp_med_course:{category:"Explore",action:"Explore Course",label:"Medical-Course Page"},exp_fnd_course:{category:"Explore",action:"Explore Course",label:"Foundation-Course Page"},exp_eng_parents:{category:"Explore",action:"Explore Course",label:"Enggineering-Parents"},exp_med_parents:{category:"Explore",action:"Explore Course",label:"Medical-Parents"},exp_fnd_parents:{category:"Explore",action:"Explore Course",label:"Foundation-Parents"},exp_eng_modal:{category:"Explore",action:"Explore Course",label:"Enggineering-Modal"},exp_med_modal:{category:"Explore",action:"Explore Course",label:"Medical-Modal"},exp_fnd_modal:{category:"Explore",action:"Explore Course",label:"Foundation-Modal"},learn_more_eng:{category:"Courses",label:"Engineering-LM"},learn_more_med:{category:"Courses",label:"Medical-LM"},learn_more_fnd:{category:"Courses",label:"Foundation-LM"},signup_em_page:{category:"Signedup",action:"Signup mode",label:"Email-page"},login_em_page:{category:"Loggedin",action:"Login Mode",label:"Email-page"},signup_em_m_page:{category:"Signedup",action:"Signup mode",label:"Email-page"},login_em_m_page:{category:"Loggedin",action:"Login Mode",label:"Email-page"},signup_em_m_top:{category:"Signedup",action:"Signup mode",label:"Email-top"},login_em_m_top:{category:"Loggedin",action:"Login Mode",label:"Email-top"},signup_em_m_btm:{category:"Signedup",action:"Signup mode",label:"Email-bottom"},login_em_m_btm:{category:"Loggedin",action:"Login Mode",label:"Email-bottom"},signup_em_m_feature:{category:"Signedup",action:"Signup mode",label:"Email-feature"},login_em_m_feature:{category:"Loggedin",action:"Login Mode",label:"Email-feature"},signup_em_m_pricing:{category:"Signedup",action:"Signup mode",label:"Email-pricing"},login_em_m_pricing:{category:"Loggedin",action:"Login Mode",label:"Email-pricing"},signup_em_referral:{ga:{category:"Signedup",action:"Signup Mode",label:"Email-referral"}},signup_fb_page:{category:"Signedup",action:"Signup mode",label:"FB-page"},login_fb_page:{category:"Loggedin",action:"Login Mode",label:"FB-page"},signup_fb_m_page:{category:"Signedup",action:"Signup mode",label:"FB-page"},login_fb_m_page:{category:"Loggedin",action:"Login Mode",label:"FB-page"},signup_fb_m_top:{category:"Signedup",action:"Signup mode",label:"FB-top"},login_fb_m_top:{category:"Loggedin",action:"Login Mode",label:"FB-top"},signup_fb_m_btm:{category:"Signedup",action:"Signup mode",label:"FB-bottom"},login_fb_m_btm:{category:"Loggedin",action:"Login Mode",label:"FB-bottom"},signup_fb_m_feature:{category:"Signedup",action:"Signup mode",label:"FB-feature"},login_fb_m_feature:{category:"Loggedin",action:"Login Mode",label:"FB-feature"},signup_fb_m_pricing:{category:"Signedup",action:"Signup mode",label:"FB-pricing"},login_fb_m_pricing:{category:"Loggedin",action:"Login Mode",label:"FB-pricing"},signup_fb_referral:{ga:{category:"Signedup",action:"Signup Mode",label:"FB-referral"}},signup_g_page:{category:"Signedup",action:"Signup mode",label:"Gmail-page"},login_g_page:{category:"Loggedin",action:"Login Mode",label:"Gmail-page"},signup_g_m_page:{category:"Signedup",action:"Signup mode",label:"Gmail-modal"},login_g_m_page:{category:"Loggedin",action:"Login Mode",label:"Gmail-modal"},signup_g_m_top:{category:"Signedup",action:"Signup mode",label:"Gmail-top"},login_g_m_top:{category:"Loggedin",action:"Login Mode",label:"Gmail-top"},signup_g_m_btm:{category:"Signedup",action:"Signup mode",label:"Gmail-bottom"},login_g_m_btm:{category:"Loggedin",action:"Login Mode",label:"Gmail-bottom"},signup_g_m_feature:{category:"Signedup",action:"Signup mode",label:"Gmail-feature"},login_g_m_feature:{category:"Loggedin",action:"Login Mode",label:"Gmail-feature"},signup_g_m_pricing:{category:"Signedup",action:"Signup mode",label:"Gmail-pricing"},login_g_m_pricing:{category:"Loggedin",action:"Login Mode",label:"Gmail-pricing"},signup_g_referral:{ga:{category:"Signedup",action:"Signup Mode",label:"Gmail-referral"}},signup_g_m_modal:{category:"Signedup",action:"Signup mode",label:"Gmail-modal"},login_g_m_modal:{category:"Loggedin",action:"Login Mode",label:"Gmail-modal"},signup_fb_m_modal:{category:"Signedup",action:"Signup mode",label:"FB-modal"},login_fb_m_modal:{category:"Loggedin",action:"Login Mode",label:"FB-modal"},signup_em_m_modal:{category:"Signedup",action:"Signup mode",label:"Email-modal"},login_em_m_modal:{category:"Loggedin",action:"Login Mode",label:"Email-modal"},forgotpass_page:{category:"Password",action:"Submit Email",label:"Forgot-Password-page"},forgotpass_m_page:{category:"Password",action:"Submit Email",label:"Forgot-Password-modal"},forgotpass_m_modal:{category:"Password",action:"Submit Email",label:"Forgot-Password-modal"},forgotpass_m_top:{category:"Password",action:"Submit Email",label:"Forgot-Password-top"},forgotpass_m_btm:{category:"Password",action:"Submit Email",label:"Forgot-Password-bottom"},forgotpass_m_feature:{category:"Password",action:"Submit Email",label:"Forgot-Password-feature"},forgotpass_m_pricing:{category:"Password",action:"Submit Email",label:"Forgot-Password-pricing"},bytes_post_cta_end:{category:"Bytes Article",label:"Article CTA"},bytes_signed_up_form:{category:"Signedup",action:"Click Signup",label:"Email Signup_Bytes Form"},bytes_signed_up_fb:{category:"Signedup",action:"Click Signup",label:"FB Signup_Bytes Form"},bytes_signed_up_topheader:{category:"Signedup",action:"Click Signup",label:"Header Sign up_Bytes"}};$(document).on("click",a,function(b){var c=$(b.target).closest(a);Cookies.set("ref_src",c.data("ref"),{expires:30})}),$(function(){var a;if("function"==typeof Cookies){if(a=Cookies.get("ref_src"),Cookies.expire("ref_src"),"undefined"==typeof a)return;if(b.hasOwnProperty(a)){var c=b[a];tpr.track.sendGAEvent(c)}}})}(),tpr.segment=function(){"use strict";function a(a,b){(_.isUndefined(b)||!_.isObject(b))&&(b={}),l(),f(a),i("ui.viewed"),q=a}function b(a,b){(_.isUndefined(b)||!_.isObject(b))&&(b={});var c=g();setTimeout(function(){l(),o={last_screen_name:c},o=_.extend(o,b),f(a),i("ui.viewed")},0)}function c(){f(q),o=r}function d(a,b){s[a]=b}function e(a){!_.isUndefined(a)&&_.isObject(a)&&(s=_.extend(s,a))}function f(a){j("ui_screen_name",a||"")}function g(){return o.ui_screen_name}function h(){l(),tpr.segment.addProperties(r),tpr.segment.setScreenName(q)}function i(a,b){a&&"undefined"!=typeof analytics&&((_.isUndefined(b)||!_.isObject(b))&&(b={}),b=_.extend(b,s),b=_.extend(b,o),analytics.track(a,b))}function j(a,b){(_.isUndefined(o)||!_.isObject(o))&&(o={}),o[a]=b}function k(a){!_.isUndefined(a)&&_.isObject(a)&&((_.isUndefined(o)||!_.isObject(o))&&(o={}),o=_.extend(o,a))}function l(){o={}}function m(){s={agent_mobile:head.mobile?1:0,client_os:p.platformName,client_version:p.platformVersion,is_native:!1,user_agent:p.userAgent,agent_platform:"web"}}var n=".-strk",o={},p=new BrowserInfo,q="",r={},s={agent_mobile:head.mobile?1:0,client_os:p.platformName,client_version:p.platformVersion,is_native:!1,user_agent:p.userAgent,agent_platform:"web"};return $(document).on("click",n,function(a){var b=$(a.target).closest(n),c=b.data("strk")||!1;if(c&&"object"!=typeof c)try{c=$.parseJSON(c)}catch(d){c=!1}if(c){var e=c.e||!1,f=_.omit(c,"e");i(e,f)}}),{init:a,initModal:b,addProperty:j,addProperties:k,resetPageProperties:l,sendEvent:i,setScreenName:f,getScreenName:g,addBaseProperty:d,addBaseProperties:e,init_close:h,resetParentScreen:c,resetBaseProperties:m}}();var tpr=tpr||{};tpr.tpl=function(){"use strict";function a(a,b){a&&_.isString(a)&&(e[a]=swig.compile(b||""))}function b(a){return e.hasOwnProperty(a)?e[a]:!1}function c(a,c){var d=b(a);return c=c||{},d?d(c):""}function d(){var b=$(".tpl-raw");b.length&&b.each(function(b){var c=$(this).data("tpl"),d=$(this).html();a(c,d)})}var e={};return $(document).ready(d),{add:a,get:b,build:c}}();var tpr=tpr||{};tpr.xhrPool=function(){"use strict";function a(a){$._xhrPool.newRequest(a)}function b(a){$._xhrPool.removeRequest(a)}function c(){$._xhrPool.abortAll()}return $._xhrPool=[],$._xhrPool.newRequest=function(a){$._xhrPool.abortAll(),$._xhrPool.push(a)},$._xhrPool.removeRequest=function(a){var b=$._xhrPool.indexOf(a);b>-1&&$._xhrPool.splice(b,1)},$._xhrPool.abortAll=function(){$(this).each(function(a,b){b.abort()}),$._xhrPool.length=0},{newRequest:a,removeRequest:b,abortAll:c}}();var tpr=tpr||{};tpr.onClick=function(){"use strict";function a(a){return!a||/\s/.test(a)?!1:!0}function b(a){return d.hasOwnProperty(a)}function c(a,c){var e=$(a.target).closest(c),f=e.data("s")||!1;if(f&&b(f)){var g=d[f];if(g.callback){var h=e.data("sdata")||!1;if(h&&"object"!=typeof h)try{h=$.parseJSON(h)}catch(i){h=!1}g.callback(a,e,h)}var j=g.config||{};j.disable_preventDefault||a.preventDefault(),j.disable_stopPropagation||a.stopPropagation()}}var d={},e=".-ct";return $(document).on("click",e,function(a){c(a,e)}),function(c,e,f){if(a(c)&&!b(c)){var g={};e&&(g.callback=e),f&&(g.config=f),d[c]=g}}}(),tpr.pageLoader=function(){"use strict";function a(){NProgress.start()}function b(){NProgress.done()}function c(a,d){if(d||(d=1),!(d>=p)){if(!n)return void setTimeout(function(){c(a,++d)},o);n=!1,b(),tpr.segment.resetPageProperties(),k.html(a),setTimeout(function(){k.removeClass("loading");var a=k.find(".js-page-breadcrumb").html()||"";$("#page_breadcrumbs_wrapper").html(a),tpr.web.fixPageTabsOnScroll();var b=location.pathname;"undefined"!=typeof ga&&ga("send","pageview",b),"undefined"!=typeof nudgespot&&nudgespot.track("pageview",{page:b})},100)}}function d(a){var b='<div class="pageError"><div class="container"><h1 class="pageError_title">Oops!</h1>';b+='<div class="pageError_msg">Some error occurred while loading the page</div>',b+='<div class="pageError_text"><a href="'+a+'">Try again</a></div></div></div>',c(b)}function e(a){$.ajax({type:"GET",url:a,cache:!1,beforeSend:function(a){tpr.xhrPool.newRequest(a)},success:function(a,b,d){tpr.xhrPool.removeRequest(d),c(a),setTimeout(function(){$("html, body").animate({scrollTop:0},100)},500)},error:function(b,c,e){"abort"===c||d(a)}})}function f(b){n=!1,e(b),location.href!=b&&history.pushState({},"",b),tpr.segment.resetBaseProperties(),k.addClass("loading"),a(),setTimeout(function(){n=!0},500)}function g(){$(window).on("popstate",function(a){q&&location.href&&"#"!=location.href&&f(location.href)}),setTimeout(function(){q=!0},2e3)}function h(){k=$("#page_content_wrapper"),l=$("#page_loading_indicator"),_.has(window,"NProgress")&&NProgress.configure({showSpinner:!1}),g(),$(document).on("click",m,function(a){if(!r){var b=$(a.target).closest(m),c=b.attr("href");c&&(a.preventDefault(),a.stopPropagation(),f(c),tpr.web.closeSidebar())}})}function i(){r=!0}function j(){r=!1}var k,l,m=".-ajaxify",n=!1,o=200,p=25,q=!1,r=!1;return $(h),{disable:i,enable:j}}();var tpr=tpr||{};tpr.modal=function(){"use strict";function a(){var a=tpr.util.genRandID(6,"md_");return l.push(a),a}function b(a){var b=_.indexOf(l,a);b>-1&&l.splice(b,1)}function c(){l.length=0}function d(b){var c=b.ctx||{};if(c.modal_id=a(),c._needs_course_data){var d=tpr.cfg.get("COURSES",!1);if(d)if("object"==typeof d)c.COURSES=d;else{d=d.replace(/(\r\n|\n|\r)/gm," ");try{d=$.parseJSON(d),d=d.COURSES,tpr.cfg.set("COURSES",d),c.COURSES=d}catch(e){}}}j.append(tpr.tpl.build(b.tpl,c));var f=j.find("#"+c.modal_id);setTimeout(function(){k.addClass("is-visible"),f.addClass("is-visible"),$("body,html").css("overflow","hidden"),f.data("modal_id",c.modal_id),b.callback&&b.callback(f,c.modal_id,c),"undefined"!=typeof ga&&ga("send","pageview","pageview:modal-"+b.tpl)},0)}function e(){return l.length}function f(a){if(a&&!(a.length<=0)){var c=a.attr("id")||a.data("modal_id");c&&b(c),a.removeClass("is-visible"),e()<=1&&(k.removeClass("is-visible"),$("body,html").css("overflow","visible")),setTimeout(function(){a.remove()},500),tpr.segment.init_close()}}function g(){var a=j.find(".md");c(),a.length&&(a.removeClass("is-visible"),setTimeout(function(){a.remove()},500)),k.removeClass("is-visible"),$("body,html").css("overflow","visible")}function h(){$(document).on("click",m,function(a){a.preventDefault(),a.stopPropagation();var b=$(this).closest(".md");f(b)}),k.click(function(){g(),tpr.segment.init_close()})}function i(){j=$("#modals_wrapper"),k=$("#modals_overlay"),h()}var j,k,l=[],m=".js-md-close";return $(i),{open:d,close:f,close_all:g}}(),tpr.account=function(){"use strict";function a(a){tpr.modal.close_all(),a=_.extend(a||{},{_needs_course_data:!0}),tpr.segment.initModal(a.course_slug?"signup":"select_course_signup"),tpr.modal.open({tpl:"modal_signup",ctx:a,callback:function(a,b,c){var d=a.find(".js-step-courses"),e=a.find(".js-step-details"),f=a.find(".js-btn-back"),g=e.find(".js-course-heading"),h=e.find("form"),i=h.find("input[name='course']"),j=h.find("input[name='name']"),k=e.find(".js-btn-fb"),l=e.find(".js-btn-gp");setTimeout(function(){j.focus()},100),d.on("click",".js-course-item",function(a){a.preventDefault();var b=$(a.target).closest(".js-course-item"),c=b.data("name"),m=b.data("slug"),n=b.data("class");g.html(c).removeClass("engineering medical foundation").addClass(n),i.val(m),setTimeout(function(){j.focus()},100);var o=tpr.util.getUrlParam("next")||!1,p="/signup/facebook/?course="+m,q="/signup/google/?course="+m;o&&(p+="&next="+encodeURI(o),q+="&next="+encodeURI(o)),k.attr("href",p),l.attr("href",q),h.find("label.error").remove(),h.find("input.error").removeClass("error"),d.removeClass("move-right fade-in").addClass("fade-out move-left"),setTimeout(function(){d.removeClass("visible")},300),e.addClass("move-right visible"),setTimeout(function(){e.addClass("fade-in").removeClass("move-right")},0),tpr.segment.initModal("signup",{}),f.show()}),f.click(function(a){a.preventDefault(),e.removeClass("fade-in").addClass("move-right fade-out"),d.removeClass("fade-out").addClass("move-left visible"),setTimeout(function(){e.removeClass("visible")},300),setTimeout(function(){d.addClass("fade-in").removeClass("move-left")},0),tpr.segment.sendEvent("ui.tapped",{ui_element_name:"back"}),tpr.segment.initModal("select_course_signup"),f.hide()}),h.validate({rules:{name:{required:!0},email:{required:!0,email:!0},password:{required:!0},phone:{required:!0,minlength:10,maxlength:10,digits:!0}},messages:{name:"Please enter your name",email:{required:"Please enter your email address",email:"Please enter a valid email address"},password:"Please enter a password",phone:"Please enter a 10 digit phone number"}})}})}function b(a){tpr.modal.close_all(),a=a||{},tpr.segment.initModal(a.ui_screen_name||"login",a.last_screen_element?{last_screen_element:a.last_screen_element}:{}),tpr.modal.open({tpl:"modal_login",ctx:a,callback:function(a,b,c){var d=a.find("form"),e=d.find("input[name='username']");setTimeout(function(){e.focus()},100),d.validate({rules:{username:{required:!0,email:!0},password:{required:!0}},messages:{username:{required:"Please enter your email address",email:"Please enter a valid email address"},password:"Please enter a password"}})}})}return tpr.onClick("signup",function(b,c,d){if(head.mobile){var e=c.attr("href");if(e)return void(window.location=e)}d=_.extend(d||{},{_needs_course_data:!0}),a(d)}),tpr.onClick("login",function(a,c,d){if(head.mobile){var e=c.attr("href");if(e)return void(window.location=e)}b(d)}),tpr.onClick("explore",function(a,b,c){if(head.mobile){var d=b.attr("href");if(d)return void(window.location=d)}c=_.extend(c||{},{_needs_course_data:!0}),tpr.modal.close_all(),tpr.segment.initModal("select_course_to_explore"),tpr.modal.open({tpl:"modal_explore",ctx:c,callback:function(a,b,c){}})}),tpr.onClick("forgot_password",function(a,b,c){if(head.mobile){var d=b.attr("href");if(d)return void(window.location=d)}tpr.modal.close_all(),tpr.modal.open({tpl:"modal_forgot_password",ctx:c,callback:function(a,b,c){}})}),tpr.onClick("switch_course",function(a,b){tpr.modal.close_all(),tpr.modal.open({tpl:"modal_switch_course",ctx:{active_course:tpr.cfg("course_slug")},callback:function(a,b,c){tpr.segment.initModal("switch_course"),a.on("click",".js-course-item",function(b){if(b.preventDefault(),!$(this).hasClass("is-active")){var c=$(this).attr("data-course-slug"),d=a.find("form"),e=d.find("input[name='exam']");e.val(c),d.submit()}})}})}),{prompt_signup:a,prompt_login:b}}(),tpr.googleLogin=function(){"use strict";function a(){window.location=g}var b="https://accounts.google.com/o/oauth2/auth?",c="https://www.googleapis.com/auth/userinfo.profile https://www.googleapis.com/auth/userinfo.email",d="594950335285-g25d1bpsatt1oaq7meqkootsfh4f8gv3.apps.googleusercontent.com",e=window.location.origin+"/finish-signup/",f="token",g=b+"scope="+c+"&client_id="+d+"&redirect_uri="+e+"&response_type="+f;return tpr.onClick("google_login",function(a,b,c){window.location=g+"&course="+c.course}),{attempt_login:a}}(),tpr.workbookPage=function(){"use strict";function a(a){j=$(".js-page-workbook"),k=j.find(".js-workbook-content"),l=j.find(".js-questions-wrapper"),m=j.find(".pagination.bottom .pagination_buttons"),n=j.find(".pagination.top .pagination_info"),o=j.find(".pagination.bottom .pagination_info"),p=j.find(".js-workbook-filters"),q=j.find(".js-loading-dots");var d=parseInt(a.previous_year_paper)||0;r={n_questions:a.n_questions,page:parseInt(a.page,10)||1,questions_api_url:a.questions_api_url,single_question_page:a.single_question_page||!1,previous_year_paper:d,course_slug:a.course_slug,subject_slug:a.subject_slug,chapter_slug:a.chapter_slug,board_slug:a.board_slug,klass_slug:a.klass_slug,ga_label:a.ga_label||"",module_name:d?"previous_years":"practice"},g(),tpr.web.delayLoadImages(l),r.single_question_page||(c(),b(),f()),window.hasOwnProperty("MathJax")&&MathJax.Hub.Queue(["Typeset",MathJax.Hub])}function b(){p.find("input").iCheck({checkboxClass:"icheckbox_minimal",radioClass:"iradio_minimal",increaseArea:"20%"});var a=p.find("input[type='checkbox']"),b=p.find(":checkbox[name='attempted'][value='attempted']"),c=p.find(":checkbox[name='attempted'][value='unattempted']"),d=p.find(":checkbox[name='syllabus'][value="+r.board_slug+"]"),e=p.find(":checkbox[name='syllabus'][value='toppr_plus']");a.on("ifUnchecked",function(a){var b=$(this).closest(".js-filter-item");b.removeClass("active"),b.find("input[type=radio]").length||tpr.segment.sendEvent("ui.tapped",{ui_element_name:$(this).closest("input").data("filter_name"),body:"is_now_unchecked"}),i()}),a.on("ifChecked",function(a){var f=$(this).closest(".js-filter-item"),g=$(this).closest("input"),h=g.val();"attempted"==g.attr("name")&&("attempted"==h?c.iCheck("uncheck"):b.iCheck("uncheck")),"syllabus"==g.attr("name")&&(h==r.board_slug?e.iCheck("uncheck"):d.iCheck("uncheck")),tpr.track.sendEvent({ev:{e:"Filtered Questions",course_slug:r.course_slug,subject_slug:r.subject_slug,chapter_slug:r.chapter_slug,filter:f.data("filter-type"),selection:g.val(),screen:r.ga_label},ga:{category:"Filters",action:"Filtered by Question "+f.data("filter-type"),label:r.ga_label}}),tpr.segment.sendEvent("ui.tapped",{ui_element_name:g.data("filter_name")||"",body:"is_now_checked"}),f.addClass("active"),i()})}function c(){m.pagination({items:r.n_questions,itemsOnPage:10,displayedPages:3,cssStyle:"compact-theme",onPageClick:function(a,b){var c,d=$(b.target);c=d.hasClass("prev")?"page_previous":d.hasClass("next")?"page_next":"page_num",b.preventDefault(),tpr.segment.sendEvent("ui.tapped",{ui_element_name:c,body:a}),i(a,!0)}}),m.pagination("drawPage",r.page)}function d(a){m.pagination("drawPage",r.page),m.pagination("updateItems",a.n_questions)}function e(a){var b=a.n_questions,c=r.page,d="Showing questions ";if(0>=b)d="";else{var e=10*(c-1)+1,f=10*c;f>b&&(f=b),d+=e+" - "+f+" of "+b}n.html(d),o.html(d)}function f(){var a=j.find(".js-goals-list");a.on("click",".js-goal",function(b){b.preventDefault();var c=$(this).closest(".js-goal"),d=c.data("goal_id")||0,e=parseInt(c.data("locked"))||0,f=a.find(".js-goal.is-active");tpr.track.sendEvent({ev:{e:"Selected Goal",course_slug:r.course_slug,subject_slug:r.subject_slug,chapter_slug:r.chapter_slug,goal_status:e?"locked":"unlocked",screen:r.ga_label},ga:{category:"Question",action:"Selected Goal",label:r.ga_label}}),tpr.segment.sendEvent("ui.tapped",{ul_element_name:"goal",goal_id:d,body:"is_now_checked"}),e||(f.removeClass("is-active"),c.addClass("is-active"),p.find("input[name='goal']").val(d),i())})}function g(){function a(a){var b=a.find(e);return b.length}function b(a,b){var c,d=[];return"matrix"==b?(a.find(g).each(function(a,b){d.push($(b).data("choice-id")+1)}),c=d.join()):"blank"==b?c=a.find("[name=choices]").val():(a.find(e).each(function(a,b){d.push($(b).index()+1)}),c=d.join()),c}var c=".js-question";j.on("click",".js-show-hint-btn",function(a){if(!tpr.cfg.get("profile_id",!1))return void tpr.account.prompt_signup({course_slug:r.course_slug});var b=$(this).closest(c);$.pubsub.publish("modal.question.show_hint",{ctx:{question_id:b.data("id"),hint_image:b.data("hint_image"),hint:b.find(".js-question-hint").html(),module:r.module_name}});var d=b.data("style")||"";tpr.segment.sendEvent("ui.tapped",{ui_element_name:"hint",question_id:b.data("id"),question_type:d.replace(/ /g,"_"),subject:b.data("section")||""}),tpr.track.sendEvent({ev:{e:"Viewed Hint",course_slug:r.course_slug,chapter_slug:r.chapter_slug,subject_slug:r.subject_slug,screen_name:r.ga_label},ga:{category:"Question",action:"Viewed Hint",label:r.ga_label}})}),j.on("click",".js-show-solution-btn",function(a){if(!tpr.cfg.get("profile_id",!1))return void tpr.account.prompt_signup({course_slug:r.course_slug});var b=$(this).closest(c),d=b.data("id")||0,e=b.data("style")||"";$.pubsub.publish("modal.question.show_solution",{ctx:{$question:b,question_id:d,solution_image:b.data("solution_image"),solution:b.find(".js-question-solution").html(),solution_id:b.data("solution_id"),solution_rating:parseInt(b.data("solution_rating"))||0,course_slug:r.course_slug,chapter_slug:r.chapter_slug,subject_slug:r.subject_slug,screen_name:r.ga_label,module:r.module_name}}),tpr.track.sendEvent({ev:{e:"Viewed Solution",course_slug:r.course_slug,chapter_slug:r.chapter_slug,subject_slug:r.subject_slug,screen_name:r.ga_label},ga:{category:"Question",action:"Viewed Solution",label:r.ga_label}}),tpr.segment.sendEvent("ui.tapped",{ui_element_name:"solution",question_id:d,question_type:e.replace(/ /g,"_")})}),j.on("click",".js-report-error-btn",function(){if(!tpr.cfg.get("profile_id",!1))return void tpr.account.prompt_signup({course_slug:r.course_slug});tpr.track.sendEvent({ga:{category:"Question",action:"Clicked Report Error",label:r.ga_label}});var a=$(this).closest(c),b=a.data("id")||0,d=a.data("style")||"";tpr.segment.sendEvent("ui.tapped",{ui_element_name:"report_error",question_type:d.replace(/ /g,"_"),question_id:b}),$.pubsub.publish("modal.question.report_error",{ctx:{question_id:b,trk:{ev:{e:"Submitted Error",course_slug:r.course_slug,chapter_slug:r.chapter_slug,subject_slug:r.subject_slug,screen_name:r.ga_label},ga:{category:"Question",action:"Submitted Error",label:r.ga_label}},module:r.module_name}})}),j.on("click",".js-ask-doubt-btn",function(a){if(!tpr.cfg.get("profile_id",!1))return void tpr.account.prompt_signup({course_slug:r.course_slug});var b=$(this).closest(c),d=b.data("id")||0,e=b.data("style")||"";tpr.track.sendEvent({ga:{category:"Question",action:"Clicked Ask a Doubt",label:r.ga_label}}),tpr.segment.sendEvent("ui.tapped",{ui_element_name:"ask_doubt",question_type:e.replace(/ /g,"_"),question_id:d}),$.pubsub.publish("modal.question.doubts",{ctx:{question_id:d,trk:{ev:{e:"Submitted Doubt",course_slug:r.course_slug,chapter_slug:r.chapter_slug,subject_slug:r.subject_slug,screen_name:r.ga_label},ga:{category:"Question",action:"Submitted Error",label:r.ga_label}},module:r.module_name}})});var d=".js-ques-list-option-item",e=d+".is-selected",f=".js-ques-matrix-option-item",g=f+".is-selected";j.on("click",d,function(b){b.preventDefault(),b.stopPropagation();var f=$(b.target).closest(d),g=f.closest(c);if(g.data("attempted")!==!0&&f.hasClass("is-clickable")){var h=g.data("style")||"",i=g.find(".js-submit-btn");if(f.hasClass("is-selected")){var j=a(g)||0;return 1>=j&&i.removeClass("is-enabled"),f.find("input").prop("checked",!1),f.removeClass("is-selected"),void tpr.segment.sendEvent("ui.tapped",{ui_element_name:f.index()+1,question_type:h.replace(/ /g,"_"),question_id:g.data("id")||0,body:"is_now_deselected"})}if(tpr.segment.sendEvent("ui.tapped",{ui_element_name:f.index()+1,question_type:h.replace(/ /g,"_"),question_id:g.data("id")||0,body:"is_now_selected"}),"multiple correct"!=h){var k=g.find(e);k.length&&k.each(function(){$(this).find("input").prop("checked",!1),$(this).removeClass("is-selected")})}f.find("input").prop("checked",!0),f.addClass("is-selected"),i.addClass("is-enabled")}}),j.on("click",f,function(a){a.preventDefault(),a.stopPropagation();var b=$(a.target).closest(f),d=b.closest(c);if(d.data("attempted")!==!0&&b.hasClass("is-clickable")){var e=d.find(".js-submit-btn");if(b.hasClass("is-selected")){var h=d.find(g).length||0;return 1>=h&&e.removeClass("is-enabled"),b.find("input").prop("checked",!1),b.removeClass("is-selected"),void tpr.segment.sendEvent("ui.tapped",{ui_element_name:b.data("choice-id")+1,question_type:"matrix",question_id:d.data("id")||0,body:"is_now_deselected"})}tpr.segment.sendEvent("ui.tapped",{ui_element_name:b.data("choice-id")+1,question_type:"matrix",question_id:d.data("id")||0,body:"is_now_selected"}),b.find("input").prop("checked",!0),b.addClass("is-selected"),e.addClass("is-enabled")}}),j.on("keyup",".js-blank-input",function(a){var b=$(a.target).closest(".js-blank-input"),c=b.closest(".js-question"),d=c.find(".js-submit-btn");b.val()?d.addClass("is-enabled"):d.removeClass("is-enabled")}),j.on("submit",".js-question-form",function(a){a.preventDefault(),a.stopPropagation();var b=$(a.target).closest(c),d=b.find(".js-submit-btn");d.hasClass("is-enabled")&&d.click()}),j.on("click",".js-subjective-solution-btn",function(a){if(!tpr.cfg.get("profile_id",!1))return void tpr.account.prompt_signup({course_slug:r.course_slug});var b=$(this).closest(c);$.pubsub.publish("modal.question.show_solution",{ctx:{$question:b,question_id:b.data("id"),solution_image:b.data("solution_image"),solution:b.find(".js-question-solution").html(),solution_id:b.data("solution_id"),solution_rating:parseInt(b.data("solution_rating"))||0,course_slug:r.course_slug,chapter_slug:r.chapter_slug,subject_slug:r.subject_slug,screen_name:r.ga_label}}),tpr.track.sendEvent({ev:{e:"Viewed Solution",course_slug:r.course_slug,chapter_slug:r.chapter_slug,subject_slug:r.subject_slug,screen_name:r.ga_label},ga:{category:"Question",action:"Checked Subjective Solution",label:r.ga_label}})}),j.on("click",".js-submit-btn",function(a){function e(){_.contains(["single correct","multiple correct","assertion"],l)?j.find(d).addClass("is-clickable"):"matrix"==l?j.find(".js-ques-matrix-option-item").addClass("is-clickable"):"blank"==l&&j.find("input[name='choices']").attr("disabled",!1),i.data("is-processing",!1),i.val("Submit")}function f(a){j.find(d).each(function(){var b=$(this),c=b.data("choice-id");b.hasClass("is-selected")&&b.addClass("is-wrong"),_.contains(a.right_answers,c)&&b.removeClass("is-wrong").addClass("is-correct")})}function g(a){j.find(".js-ques-matrix-option-item").each(function(){var b=$(this),c=b.data("choice-id")+"";b.hasClass("is-selected")&&b.addClass("is-wrong"),_.contains(a.right_answers,c+"")&&b.removeClass("is-wrong").addClass("is-correct")})}function h(a){var b=j.find("input[name='choices']"),c=j.find(".js-user-ans-display"),d=j.find(".js-correct-ans-display");c.find(".js-user-ans").text(b.val()),a.is_correctly_answered?c.addClass("is-correct").removeClass("hide"):(c.addClass("is-wrong").removeClass("hide"),
d.find(".js-correct-ans").text(a.right_answer),d.removeClass("hide")),b.hide()}a.preventDefault(),a.stopPropagation();var i=$(a.target).closest(".js-submit-btn");if(i.hasClass("is-enabled")&&!i.data("is-processing")){if(!tpr.cfg.get("profile_id",!1))return void tpr.account.prompt_signup({course_slug:r.course_slug});var j=$(this).closest(c),k=j.data("id")||0,l=j.data("style")||"",m=j.find("form").serialize();i.data("is-processing",!0),i.val("Checking..."),_.contains(["single correct","multiple correct","assertion"],l)?j.find(d).removeClass("is-clickable"):"matrix"==l?j.find(".js-ques-matrix-option-item").removeClass("is-clickable"):"blank"==l&&(j.find("input[name='choices']").attr("disabled",!0),tpr.segment.sendEvent("ui.tapped",{ui_element_name:j.find(".js-blank-input").val(),question_id:k})),tpr.track.sendEvent({ev:{e:"Submitted Answer",course_slug:r.course_slug,chapter_slug:r.chapter_slug,subject_slug:r.subject_slug,screen_name:r.ga_label},ga:{category:"Question",action:"Submitted Answer",label:r.ga_label}}),tpr.segment.sendEvent("ui.tapped",{ui_element_name:"submit",body:b(j,l),question_type:l.replace(/ /g,"_"),question_id:k}),$.ajax({type:"POST",url:tpr.cfg("api_prefix")+"record-answer/",data:m,success:function(a){"success"==a.status?(a.is_correctly_answered?j.removeClass("is-wrong").addClass("is-attempted is-correct"):j.removeClass("is-correct").addClass("is-attempted is-wrong"),_.contains(["single correct","multiple correct","assertion"],l)?f(a):"matrix"==l?g(a):"blank"==l&&h(a),i.remove(),j.addClass("mb-60")):e()},error:function(a,b,c){e()}})}}),j.on("click",".js-ques-bookmark-btn",function(a){if(!tpr.cfg.get("profile_id",!1))return void tpr.account.prompt_signup({course_slug:r.course_slug});var b=$(a.target).closest(".js-ques-bookmark-btn"),d=b.closest(c),e=d.data("id")||0,f=d.data("is-bookmarked")||0,g=b.data("in-progress")||0,h="Bookmarked Question",i="is_now_checked",j=d.data("style")||"";if(!g){b.addClass("is-processing"),b.data("in-progress",1);var k={question_id:e};f&&(k.action="remove",h="Unbookmarked Question",i="is_now_unchecked"),tpr.track.sendEvent({ev:{e:h,course_slug:r.course_slug,chapter_slug:r.chapter_slug,subject_slug:r.subject_slug,screen_name:r.ga_label},ga:{category:"Question",action:h,label:r.ga_label}}),tpr.segment.sendEvent("ui.tapped",{ui_element_name:"bookmark",question_id:e,body:i,question_type:j.replace(/ /g,"_")}),$.ajax({type:"POST",url:tpr.cfg("api_prefix")+tpr.cfg("course_slug")+"/bookmark/",data:k,success:function(a){"success"==a.status&&(f?(d.data("is-bookmarked",0),b.removeClass("is-active")):(d.data("is-bookmarked",1),b.addClass("is-active"))),b.removeClass("is-processing"),b.data("in-progress",0)},error:function(a,c,d){b.removeClass("is-processing"),b.data("in-progress",0)}})}})}function h(a){r.previous_year_paper||(p.find(".js-n-difficulty-easy").html(a.difficulty_counts.easy),p.find(".js-n-difficulty-medium").html(a.difficulty_counts.medium),p.find(".js-n-difficulty-hard").html(a.difficulty_counts.hard),p.find(".js-n-style-single-correct").html(a.style_counts.single_correct),p.find(".js-n-style-multiple-correct").html(a.style_counts.multiple_correct),p.find(".js-n-style-assertion").html(a.style_counts.assertion),p.find(".js-n-style-matrix").html(a.style_counts.matrix),p.find(".js-n-style-blank").html(a.style_counts.blank),p.find(".js-n-bookmarked").html(a.n_bookmarked),p.find(".js-n-attempted").html(a.n_attempted),p.find(".js-n-unattempted").html(a.n_unattempted))}function i(a,b){function c(){var a=r.questions_api_url+"?format=html&page="+r.page;$.ajax({type:"GET",url:a,data:f,beforeSend:function(a){tpr.xhrPool.newRequest(a)},success:function(a,b,c){tpr.xhrPool.removeRequest(c),l.html(a.questions),setTimeout(function(){h(a),d(a),e(a),tpr.web.delayLoadImages(l),q.addClass("hide"),k.removeClass("hide")},0),window.hasOwnProperty("MathJax")&&MathJax.Hub.Queue(["Typeset",MathJax.Hub,"workbook_questions_list"])},error:function(a,b,c){"abort"!=b&&l.html("Sorry, something went wrong while loading questions. Please try again.")}})}a&&tpr.track.sendEvent({ga:{category:"Pagination",action:"Went to Another Page",label:r.ga_label}}),r.page=a||1;var f=p.serialize()||{};k.addClass("hide"),q.removeClass("hide"),setTimeout(function(){l.html(""),c()},300)}var j,k,l,m,n,o,p,q,r={};return{init:a}}(),tpr.answerkeyPage=function(){"use strict";function a(a){i=$(".js-page-answerkey"),j=i.find(".js-answerkey-content"),k=i.find(".js-questions-wrapper"),l=i.find(".pagination.bottom .pagination_buttons"),m=i.find(".pagination.top .pagination_info"),n=i.find(".pagination.bottom .pagination_info"),o=i.find(".js-answerkey-filters"),p={n_questions:a.n_questions,page:a.page,questions_api_url:a.questions_api_url,single_question_page:a.single_question_page||!1,previous_year_paper:parseInt(a.previous_year_paper)||0,label_suffix:a.label_suffix||""},g(),p.single_question_page||(c(),b(),f()),window.hasOwnProperty("MathJax")&&MathJax.Hub.Queue(["Typeset",MathJax.Hub])}function b(){o.find("input").iCheck({checkboxClass:"icheckbox_minimal",radioClass:"iradio_minimal",increaseArea:"20%"});var a=o.find("input[type='checkbox'], input[type='radio']");a.on("ifUnchecked",function(a){var b=$(this).closest(".js-filter-item");b.removeClass("active"),h()}),a.on("ifChecked",function(a){var b=$(this).closest(".js-filter-item"),c=b.find(".filters_item_label").text()||"";b.addClass("active"),tpr.track.sendEvent({ga:{category:"Filters",action:"Filtered by "+b.data("filter-type"),label:c+" - Test Series"}}),tpr.segment.sendEvent("ui.tapped",{ui_element_name:"filter_questions",filter:c.toLowerCase().replace(/ /g,"_")}),h()})}function c(){l.pagination({items:p.n_questions,itemsOnPage:10,displayedPages:3,cssStyle:"compact-theme",onPageClick:function(a,b){var c,d=$(b.target);c=d.hasClass("prev")?"page_previous":d.hasClass("next")?"page_next":"page_num",b.preventDefault(),tpr.segment.sendEvent("ui.tapped",{ui_element_name:c,body:a}),h(a,!0)}})}function d(a){l.pagination("drawPage",p.page),l.pagination("updateItems",a.n_questions)}function e(a){var b=a.n_questions,c=p.page,d="Showing questions ";if(0>=b)d="";else{var e=10*(c-1)+1,f=10*c;f>b&&(f=b),d+=e+" - "+f+" of "+b}m.html(d),n.html(d)}function f(){var a=i.find(".js-goals-list");a.on("click",".js-goal",function(b){b.preventDefault();var c=$(this).closest(".js-goal"),d=c.data("goal_id")||0,e=parseInt(c.data("locked"))||0;e||(a.find(".js-goal.is-active").removeClass("is-active"),c.addClass("is-active"),o.find("input[name='goal']").val(d),h())})}function g(){var a=".js-question";i.on("click",".js-show-hint-btn",function(b){var c=$(this).closest(a),d=c.data("id")||0,e=c.data("style")||"";tpr.track.sendEvent({ga:{category:"Question",action:"Checked Hint",label:d+p.label_suffix}}),tpr.segment.sendEvent("ui.tapped",{ui_element_name:"hint",question_id:d,question_type:e.replace(/ /g,"_"),subject:c.data("section")||""}),$.pubsub.publish("modal.question.show_hint",{ctx:{question_id:d,hint_image:c.data("hint_image"),hint:c.find(".js-question-hint").html(),module:"answerkey"}})}),i.on("click",".js-show-solution-btn",function(b){var c=$(this).closest(a),d=c.data("id")||0,e=c.data("style")||"";tpr.track.sendEvent({ga:{category:"Question",action:"Checked Solution",label:d+p.label_suffix}}),tpr.segment.sendEvent("ui.tapped",{ui_element_name:"solution",question_id:d,question_type:e.replace(/ /g,"_"),subject:c.data("section")||""}),$.pubsub.publish("modal.question.show_solution",{ctx:{$question:c,question_id:d,solution_image:c.data("solution_image"),solution:c.find(".js-question-solution").html(),solution_id:c.data("solution_id"),solution_rating:parseInt(c.data("solution_rating"))||0,module:"answerkey"}})}),i.on("click",".js-report-error-btn",function(){var b=$(this).closest(a),c=b.data("id")||0,d=b.data("style")||"";tpr.track.sendEvent({ga:{category:"Question",action:"Clicked Report Error",label:c+p.label_suffix}}),tpr.segment.sendEvent("ui.tapped",{ui_element_name:"report_error",question_id:c,question_type:d.replace(/ /g,"_"),subject:b.data("section")||""}),$.pubsub.publish("modal.question.report_error",{ctx:{question_id:c,trk:{ga:{category:"Question",action:"Submitted Error",label:p.label_suffix}},module:"answerkey"}})}),i.on("click",".js-ask-doubt-btn",function(b){var c=$(this).closest(a),d=c.data("id")||0,e=c.data("style")||"";tpr.track.sendEvent({ga:{category:"Question",action:"Clicked Ask a Doubt",label:d+p.label_suffix}}),tpr.segment.sendEvent("ui.tapped",{ui_element_name:"ask_doubt",question_id:d,question_type:e.replace(/ /g,"_"),subject:c.data("section")||""}),$.pubsub.publish("modal.question.doubts",{ctx:{question_id:d,trk:{ev:{e:"Submitted Doubt",course_slug:p.course_slug,chapter_slug:p.chapter_slug,subject_slug:p.subject_slug,activity_name:"Question Bank"},ga:{category:"Question",action:"Submitted Doubt",label:d+p.label_suffix}},label_suffix:p.label_suffix,module:"answerkey"}})}),i.on("click",".js-ques-bookmark-btn",function(b){var c=$(b.target).closest(".js-ques-bookmark-btn"),d=c.closest(a),e=d.data("id")||0,f=d.data("is-bookmarked")||0,g=c.data("in-progress")||0;if(!g){c.addClass("is-processing"),c.data("in-progress",1);var h={question_id:e};f&&(h.action="remove"),$.ajax({type:"POST",url:tpr.cfg("api_prefix")+tpr.store("course_slug")+"/bookmark/",data:h,success:function(a){"success"==a.status&&(f?(d.data("is-bookmarked",0),c.removeClass("is-active")):(d.data("is-bookmarked",1),c.addClass("is-active"))),c.removeClass("is-processing"),c.data("in-progress",0)},error:function(a,b,d){c.removeClass("is-processing"),c.data("in-progress",0)}})}})}function h(a,b){function c(){var a=p.questions_api_url+"?format=html&page="+p.page;$.ajax({type:"GET",url:a,data:f,beforeSend:function(a){tpr.xhrPool.newRequest(a)},success:function(a,b,c){tpr.xhrPool.removeRequest(c),k.html(a.questions),setTimeout(function(){d(a),e(a),j.removeClass("hide")},0),window.hasOwnProperty("MathJax")&&MathJax.Hub.Queue(["Typeset",MathJax.Hub,"answerkey_questions_list"])},error:function(a,b,c){"abort"!=b&&k.html("Sorry, something went wrong while loading questions. Please try again.")}})}p.page=a||1;var f=o.serialize()||{};j.addClass("hide"),setTimeout(function(){k.html(""),c()},300)}var i,j,k,l,m,n,o,p={};return{init:a}}(),tpr.cheatsheetPage=function(){"use strict";function a(a){f=$(".js-page-cheatsheet"),g=f.find(".js-cs-sections-list"),b(),c(),d(),h={course_slug:a.course_slug,subject_slug:a.subject_slug,chapter_slug:a.chapter_slug},window.hasOwnProperty("MathJax")&&MathJax.Hub.Queue(["Typeset",MathJax.Hub])}function b(){f.on("click",".js-cs-section",function(a){a.preventDefault();var b=$(a.target).closest(".js-cs-section");if(!b.hasClass("is-disabled")){var c=b.data("id"),d=f.find("#section_"+c);d.length&&$("body").animate({scrollTop:d.offset().top-70},400),tpr.track.sendEvent({ga:{category:"Concepts",action:"Selected Section",label:h.chapter_slug}}),tpr.segment.sendEvent("ui.tapped",{ui_element_name:b.attr("title")})}})}function c(){f.on("click",".js-bookmark-btn",function(a){var b=$(a.target).closest(".js-bookmark-btn"),c=b.closest(".js-sheet-tile"),d=c.data("id")||0,e=parseInt(c.data("is-bookmarked"))||0,f=b.data("in-progress")||0;if(!f){b.addClass("is-processing"),b.data("in-progress",1);var g={cheatsheet_id:d};e?g.action="remove":tpr.track.sendEvent({ga:{category:"Concepts",action:"Bookmarked Concepts",label:h.chapter_slug}}),$.ajax({type:"POST",url:tpr.cfg("api_prefix")+"bookmark-cheatsheet/",data:g,success:function(a){if("success"==a.status){var d="is_now_checked";e?(c.data("is-bookmarked",0),b.removeClass("is-active"),d="is_now_unchecked"):(c.data("is-bookmarked",1),b.addClass("is-active")),tpr.segment.sendEvent("ui.tapped",{ui_element_name:"bookmark",body:d})}b.removeClass("is-processing"),b.data("in-progress",0)},error:function(a,c,d){b.removeClass("is-processing"),b.data("in-progress",0)}})}})}function d(){var a=f.find(".js-filters-type"),b=a.find("input[type='radio']");b.iCheck({checkboxClass:"icheckbox_minimal",radioClass:"iradio_minimal",increaseArea:"20%"}),b.on("ifUnchecked",function(a){var b=$(this).closest(".js-filter-item");b.removeClass("active"),b.find("input[type=radio]").length||tpr.segment.sendEvent("ui.tapped",{ui_element_name:$(this).closest("input").val(),body:"is_now_unchecked"})}),b.on("ifChecked",function(a){var b=$(this).closest(".js-filter-item"),c=$(this).closest("input").val();tpr.track.sendEvent({ga:{category:"Filters",action:"Filtered by Concept Type",label:c}}),tpr.segment.sendEvent("ui.tapped",{ui_element_name:c,body:"is_now_checked"}),b.addClass("active"),e(c)})}function e(a){var b=f.find(".js-sheet-section");return"all"==a?(f.find(".js-sheet-tile").removeClass("hide"),b.removeClass("hide"),void g.find(".js-cs-section").removeClass("is-disabled")):void b.each(function(){var b=$(this),c=b.data("id"),d=g.find(".js-cs-section[data-id='"+c+"']"),e=b.find(".js-sheet-tile"),f=e.filter("[data-type='"+a+"']");f.length?(e.addClass("hide"),f.removeClass("hide"),b.removeClass("hide"),d.removeClass("is-disabled")):(b.addClass("hide"),d.addClass("is-disabled"))})}var f,g,h;return{init:a}}(),tpr.leaderboard=function(){"use strict";function a(a){d=$(".js-page-leaderboard"),e=d.find(".js-users-wrapper"),f=d.find(".pagination.bottom .pagination_buttons"),g=d.find(".pagination.top .pagination_info"),h=d.find(".pagination.bottom .pagination_info"),i=d.siblings(".js-loading-dots"),j={users_api_url:a.users_api_url,n_users:a.n_users,page:a.page},a.n_users&&b()}function b(){f.pagination({items:j.n_users,itemsOnPage:20,displayedPages:3,cssStyle:"compact-theme",onPageClick:function(a,b){var d,e=$(b.target);d=e.hasClass("prev")?"page_previous":e.hasClass("next")?"page_next":"page_num",b.preventDefault(),tpr.segment.sendEvent("ui.tapped",{ui_element_name:d,body:a}),c(a,!0)}}),f.pagination("drawPage",j.page)}function c(a,b){function c(){var a=j.users_api_url+"?format=html&page="+j.page;$.ajax({type:"GET",url:a,beforeSend:function(a){tpr.xhrPool.newRequest(a)},success:function(a,b,c){tpr.xhrPool.removeRequest(c),e.html(a.users_html),setTimeout(function(){k(a),l(a),i.addClass("hide"),d.removeClass("hide")},0)},error:function(a,b,c){"abort"!=b&&e.html("Sorry, something went wrong while loading users. Please try again.")}})}function k(a){f.pagination("drawPage",j.page),f.pagination("updateItems",j.n_users)}function l(a){var b=a.n_users,c=j.page,d="Showing users ";if(0>=b)d="";else{var e=20*(c-1)+1,f=20*c;f>b&&(f=b),d+=e+" - "+f+" of "+b}g.html(d),h.html(d)}j.page=a||1,d.addClass("hide"),i.removeClass("hide"),setTimeout(function(){e.html(""),c()},300)}var d,e,f,g,h,i,j={};return{init:a}}(),tpr.profileEditPage=function(){"use strict";function a(){f=$(".js-page-edit-profile");var a=f.find("input[type='checkbox']");a.length&&a.iCheck({checkboxClass:"icheckbox_minimal",radioClass:"iradio_minimal",increaseArea:"20%"}),g=f.find("#photo_form"),h=g.find("input[name='photo']"),i=f.find(".js-btn-upload-photo"),j=f.find(".js-user-thumb"),k=j.find(".js-upload-indicator"),b(),c(),d(),e(),$("select").select2({minimumResultsForSearch:1/0,width:"100%"})}function b(){function a(a){var b="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",c=tpr.cfg("profile_id");if(a.hasOwnProperty("profile_photo_url")){tpr.cfg("profile_photo_url",a.profile_photo_url);var d=$(".-uimg-"+c);d.each(function(){$(this).attr("src",b),$(this).attr("src",tpr.cfg("profile_photo_url"))})}k.removeClass("is-visible"),i.show()}function b(){k.removeClass("is-visible"),i.show()}i.click(function(a){a.preventDefault(),h.click()}),h.change(function(){i.hide(),k.addClass("is-visible"),g.ajaxSubmit({dataType:"json",clearForm:!0,success:function(c){"success"==c.status?a(c):b()},error:b})})}function c(){function a(){if(l.addClass("hide"),h.val()!==i.val())return void c("Passwords do not match");var a={password:g.val(),new_password:h.val(),retype_password:i.val(),csrfmiddlewaretoken:tpr.cfg("csrf_token")||""};e.find("input").attr("disabled",!0),k.hide();var f=tpr.tpl.build("loading_dots",{size:10});j.html(f),$.ajax({type:"POST",url:tpr.cfg("api_prefix")+"profile/change-password/",data:a,success:function(a){"success"==a.status?(j.hide(),g.val(""),h.val(""),i.val(""),d(),l.removeClass("hide")):b(a.message)},error:b})}function b(a){a=a||"Failed to change password",c(a),d()}function c(a){j.removeClass("color-good").addClass("color-bad").html(a).show()}function d(){e.find("input").attr("disabled",!1),k.show()}var e=f.find(".js-form-change-password");if(e.length){var g=e.find("input[name='password']"),h=e.find("input[name='new_password']"),i=e.find("input[name='retype_password']"),j=e.find(".js-response-wrapper"),k=e.find("input[type='submit']"),l=$(".js-password-changed-alert");e.validate({rules:{password:{required:!0},new_password:{required:!0},retype_password:{required:!0}},messages:{password:{required:"Please enter your current password"},new_password:{required:"Please enter new password"},retype_password:{required:"Please retype new password"}},submitHandler:a})}}function d(){var a=f.find("input[name='pseudo_subscribed']"),b=f.find("input[name='subscribed']");a.length&&(a.on("ifChecked",function(a){b.val("yes"),tpr.segment.sendEvent("ui.tapped",{ui_element_name:"news_check",body:"is_now_checked"})}),a.on("ifUnchecked",function(a){b.val("no"),tpr.segment.sendEvent("ui.tapped",{ui_element_name:"news_check",body:"is_now_unchecked"})}))}function e(){var a=f.find(".js-input-phone"),b=f.find(".js-input-email"),c=a.parent().siblings(".js-verify-prompt"),d=b.parent().siblings(".js-verify-prompt");a.on("keyup",function(){a.val()!==tpr.cfg("profile_mobile")?c.hide():c.show()}),b.on("keyup",function(){b.val()!==tpr.cfg("profile_email")?d.hide():d.show()})}var f,g,h,i,j,k;return{init:a}}(),tpr.testTimedPage=function(){"use strict";function a(a){var d=a.time_left;M=a.answer_sheet_id,N=a.course_slug,O=a.year,P=a.test_id,r=$(".js-test-tool-wrapper"),s=r.find(".js-test-tool"),t=s.find(".js-loading-view"),u=s.find(".js-sidebar-overlay"),v=s.find(".js-filters-drawer"),w=v.find("input[type='radio'], input[type='checkbox']"),x=s.find(".js-open-filters"),y=s.find(".js-clear-filters"),z=s.find(".js-apply-filters"),A=s.find(".js-btn-primary-next-ques"),B=s.find(".js-content-area"),C=s.find(".js-btn-pause-test"),D=$("#test_tool_modals_overlay"),E=$(".js-test-tool-wrapper").find(".js-test-pause-modal"),F=E.find(".js-btn-submit"),G=E.find(".js-btn-resume"),H=s.find(".js-ques-list"),I=s.find(".js-ques-wrapper"),f(),i(),j(),tpr.web.delayLoadImages(I),A.click(function(a){a.preventDefault();var b=_.indexOf(T,K.id),c=T.length-1;if(b>=0&&c>b){var d=T[b+1];tpr.track.sendEvent({ga:{category:"Test Series",label:"Test Tool - Primary Question Button",action:K.choice_selected?"Saved and Next Question":"Skipped Question"}}),tpr.segment.sendEvent("ui.tapped",{ui_element_name:K.choice_selected?"save_and_next":"skip",question_id:K.id||0}),k(d)}}),C.click(function(a){tpr.track.sendEvent({ga:{category:"Test Series",action:"Clicked Finish Button"}}),tpr.segment.sendEvent("ui.tapped",{ui_element_name:"finish",question_id:K?K.id:0}),tpr.segment.initModal("finish_test"),a.preventDefault(),b()}),G.click(function(a){tpr.track.sendEvent({ga:{category:"Test Series",action:"Resumed Test"}}),a.preventDefault(),c(),tpr.segment.sendEvent("ui.tapped",{ui_element_name:"resume_test"}),tpr.segment.resetParentScreen()}),F.click(function(a){tpr.track.sendEvent({ga:{category:"Test Series",action:"Submitted Test"}}),a.preventDefault(),e()});var g=r.find(".js-test-timer-hours"),h=r.find(".js-test-timer-minutes"),l=r.find(".js-test-timer-seconds");Q=new CountdownTimer({seconds:d,onTick:function(){g.text(Q.fHours),h.text(Q.fHMins),l.text(Q.fSecs)},onComplete:function(){e(!0)}}),Q.start(),setTimeout(function(){var a=H.find(".js-ques-item").first();a.click(),t.hide()},0)}function b(){var a=0,b=0,c=0,d=0;_.each(S,function(e){var f=R[e];switch(f.filter_category){case"answered":a++;break;case"skipped":b++;break;case"review_later":c++;break;case"unattempted":d++}}),E.find(".js-count-q-answered").html(a),E.find(".js-count-q-skipped").html(b),E.find(".js-count-q-revise-later").html(c),E.find(".js-count-q-unattempted").html(d),D.addClass("is-visible"),E.addClass("is-visible")}function c(){E.removeClass("is-visible"),D.removeClass("is-visible")}function d(a){var b=t.find(".js-loading-title");a?b.html(a).show():b.hide(),t.show()}function e(a){function b(){setTimeout(e,1500)}var f=a?"Time up. Submitting answers...":"Submitting answers...",g="";_.each(S,function(a){var b=R[a];b.updateAction(),g+="&answers="+encodeURIComponent(b.submit_data)}),g="answer_sheet_id="+M+"&csrfmiddlewaretoken="+tpr.cfg("csrf_token")+g,c(),d(f),$.ajax({type:"POST",url:tpr.cfg("api_prefix")+N+"/test-series/"+O+"/test/"+P+"/finish/",data:g,success:function(a){if("success"==a.status){var c="/"+N+"/test-series/"+O+"/test/"+P+"/";window.location=c}else b()},error:function(){b()}})}function f(){w.iCheck({checkboxClass:"icheckbox_minimal",radioClass:"iradio_minimal",increaseArea:"20%"}),w.on("ifUnchecked",function(a){var b=$(this).closest(".js-filter-item"),c=b.find(".filters_item_label").text()||"";b.removeClass("active"),b.find("input[type=radio]").length||(tpr.track.sendEvent({ga:{category:"Filters",action:"Unchecked a filter",label:"Test series test tool"}}),tpr.segment.sendEvent("ui.tapped",{ui_element_name:c.toLowerCase().replace(/ /g,"_"),body:"is_now_unchecked"}))}),w.on("ifChecked",function(a){var b=$(this).closest(".js-filter-item"),c=($(this).closest("input"),b.find(".filters_item_label").text()||"");b.addClass("active"),tpr.track.sendEvent({ga:{category:"Filters",action:"Checked a filter",label:"Test series test tool"}}),tpr.segment.sendEvent("ui.tapped",{ui_element_name:c.toLowerCase().replace(/ /g,"_"),body:"is_now_checked"})}),y.click(function(a){a.preventDefault(),w.iCheck("uncheck"),tpr.track.sendEvent({ga:{category:"Filters",action:"Cleared Filters",label:"Test series test tool"}}),tpr.segment.sendEvent("ui.tapped",{ui_element_name:"clear"}),setTimeout(function(){h(),tpr.segment.setScreenName("ts_test_attempt"),tpr.segment.sendEvent("ui.viewed")},100)}),z.click(function(a){a.preventDefault();var b=v.find("input[name='status']:checked").map(function(){return $(this).val()}).get();tpr.track.sendEvent({ga:{category:"Filters",action:"Applied Filters",label:"Test series test tool"}}),tpr.segment.sendEvent("ui.tapped",{ui_element_name:"apply"}),g(b),h(),tpr.segment.setScreenName("ts_test_attempt"),tpr.segment.sendEvent("ui.viewed")}),x.click(function(a){a.preventDefault(),v.data("is-open")!==!0&&v.data("is-changing")!==!0&&(tpr.track.sendEvent({ga:{category:"Filters",action:"Clicked drawer",label:"Test series test tool"}}),tpr.segment.sendEvent("ui.tapped",{ui_element_name:"filter_questions",question_id:K.id||0}),v.data("is-changing",!0),u.addClass("is-visible is-shown"),v.addClass("is-open"),x.addClass("hide"),y.removeClass("hide"),z.removeClass("hide"),v.data("is-open",!0),setTimeout(function(){v.data("is-changing",!1),tpr.segment.setScreenName("ts_test_attempt_filters"),tpr.segment.sendEvent("ui.viewed")},300))})}function g(a){T=[],!a||_.isEmpty(a)?_.each(S,function(a){T.push(a)}):_.each(S,function(b){_.contains(a,R[b].filter_category)&&T.push(b)});var b=H.find(".js-qlist-section");b.each(function(){var a=$(this),b=0;a.find(".js-ques-item").each(function(){var a=$(this),c=parseInt(a.data("qid"),10)||0;_.contains(T,c)?(a.removeClass("hide"),b++):a.addClass("hide")}),b?a.removeClass("hide"):a.addClass("hide")}),T.length&&k(T[0])}function h(){v.data("is-open")===!0&&v.data("is-changing")!==!0&&(v.data("is-changing",!0),v.removeClass("is-open"),u.removeClass("is-shown"),y.addClass("hide"),z.addClass("hide"),x.removeClass("hide"),setTimeout(function(){u.removeClass("is-visible"),v.data("is-open",!1),v.data("is-changing",!1)},300))}function i(){H.on("click",".js-ques-item",function(a){a.preventDefault();var b=$(a.target).closest(".js-ques-item");if(!b.hasClass("is-active")){tpr.track.sendEvent({ga:{category:"Test Series",action:"Clicked sidebar question"}}),tpr.segment.sendEvent("ui.tapped",{ui_element_name:"question",ui_context:"left_panel",question_id:b.data("qid")});var c=b.data("qid")||0;k(c,b)}})}function j(){J=I.find(W),J.each(function(){var a=$(this),b=a.data("id")||0;if(b){var c=new V(a);R[b]=c,S.push(b),T.push(b)}}),I.on("click",X,function(a){a.preventDefault(),a.stopPropagation();var b=$(a.target).closest(X),c=b.closest(W),d=c.data("style")||"";if(b.hasClass("is-selected")){var e=n(c)||0;return 1>=e&&(K.setChoiceSelected(!1),p()),b.find("input").prop("checked",!1),b.removeClass("is-selected"),void tpr.segment.sendEvent("ui.tapped",{ui_element_name:b.index()+1,question_type:d.replace(/ /g,"_"),question_id:c.data("id")||0,body:"is_now_deselected"})}if(tpr.segment.sendEvent("ui.tapped",{ui_element_name:b.index()+1,question_type:d.replace(/ /g,"_"),question_id:c.data("id")||0,body:"is_now_selected"}),"multiple correct"!=d){var f=c.find(Y);f.length&&f.each(function(){$(this).find("input").prop("checked",!1),$(this).removeClass("is-selected")})}b.find("input").prop("checked",!0),b.addClass("is-selected"),K.setChoiceSelected(!0),o()}),I.on("click",Z,function(a){a.preventDefault(),a.stopPropagation();var b=$(a.target).closest(Z),c=b.closest(W);if(b.hasClass("is-selected")){var d=c.find(aa).length||0;return 1>=d&&(K.setChoiceSelected(!1),p()),b.find("input").prop("checked",!1),void b.removeClass("is-selected")}b.find("input").prop("checked",!0),b.addClass("is-selected"),K.setChoiceSelected(!0),o(),tpr.segment.sendEvent("ui.tapped",{ui_element_name:q(c,"matrix"),question_type:"matrix",question_id:c.data("id")||0})}),I.on("keyup",".js-blank-input",function(a){var b=$(a.target).closest(".js-blank-input");b.closest(W);b.val()?(K.setChoiceSelected(!0),o()):(K.setChoiceSelected(!1),p())});var a=I.find(":checkbox[name='review_later']");a.iCheck({checkboxClass:"icheckbox_minimal",radioClass:"iradio_minimal",increaseArea:"20%"}),a.on("ifChecked",function(a){K.setReviewLater(!0),tpr.track.sendEvent({ga:{category:"Test Series",action:"Checked Review Later"}}),tpr.segment.sendEvent("ui.tapped",{ui_element_name:"review_later",question_id:K.id||0,body:"is_now_checked"})}),a.on("ifUnchecked",function(a){K.setReviewLater(!1),tpr.track.sendEvent({ga:{category:"Test Series",action:"Unchecked Review Later"}}),tpr.segment.sendEvent("ui.tapped",{ui_element_name:"review_later",question_id:K.id||0,body:"is_now_unchecked"})})}function k(a,b){K&&(m(),L.addClass("hide"),H.find(".js-ques-item.is-active").removeClass("is-active")),setTimeout(function(){L=I.find("#ques-"+a),b=b||H.find("#qlist-"+a),L.length&&(K=R[a],K.setSeen(),K.updateFilterCategory(),L.removeClass("hide"),b.addClass("is-active"),U.resetAndStart(),K.choice_selected?o():p())},10)}function l(a){switch(a||(a=H.find("#qlist-"+K.id)),a.removeClass("is-answered is-skipped is-markedForReview"),K.filter_category){case"answered":a.addClass("is-answered");break;case"skipped":a.addClass("is-skipped");break;case"review_later":a.addClass("is-markedForReview")}}function m(){var a=U.getTimeTaken(!0);K.setSeen(),K.addTimeTaken(a),K.updateFilterCategory(),K.updateAction(),l(),K.submitAnswer()}function n(a){var b=a.find(Y);return b.length}function o(){A.html("Save and Next").removeClass("grey")}function p(){A.html("Skip").addClass("grey")}function q(a,b){var c,d=[];return"matrix"==b?(a.find(_identifier_option_matrix_items_selected).each(function(a,b){d.push($(b).data("choice-id")+1)}),c=d.join()):"blank"==b?c=a.find("[name=choices]").val():(a.find(Y).each(function(a,b){d.push($(b).index()+1)}),c=d.join()),c}var r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R={},S=[],T=[],U=function(){function a(){f=!0}function b(){f=!1}function c(){e=0,f=!1}function d(b){return b&&a(),e}var e=0,f=!0;setInterval(function(){f||(e+=100)},100);return{pause:a,resume:b,resetAndStart:c,getTimeTaken:d}}(),V=function(a){this.id=a.data("id")||0,this.style=a.data("style")||"",this.seen=parseInt(a.data("seen"),10)?!0:!1,this.review_later=parseInt(a.data("review-later"),10)?!0:!1,this.submit_pending=!1,this.submit_in_progress=!1,this.action=a.data("action")||"",this.time_taken=0,this.choice_selected=parseInt(a.data("n-selected-choices"),10)?!0:!1,this.updateFilterCategory(),this.updateSubmitData(a)};V.prototype.updateFilterCategory=function(){return this.seen&&!this.review_later?void(this.choice_selected?this.filter_category="answered":this.filter_category="skipped"):this.seen&&this.review_later?void(this.filter_category="review_later"):void(this.seen||(this.filter_category="unattempted"))},V.prototype.updateAction=function(){this.review_later?this.choice_selected?this.action="answer-review":this.action="answer-later":this.choice_selected?this.action="answer":this.action="skip"},V.prototype.setReviewLater=function(a){this.review_later=a},V.prototype.setSeen=function(){this.seen=!0},V.prototype.setChoiceSelected=function(a){var b=this.choice_selected?!0:!1;this.choice_selected=a,b!=this.choice_selected&&l()},V.prototype.addTimeTaken=function(a){a=parseInt(a,10)||0,this.time_taken+=a},V.prototype.removeSubmittedTimeTaken=function(a){a=parseInt(a,10)||0,this.time_taken-=a,this.time_taken<0&&(this.time_taken=0)},V.prototype.submitAnswer=function(){var a=this,b=a.time_taken;this.updateSubmitData();var c=this.submit_data;a.submit_pending=!0,a.submit_in_progress=!0,$.ajax({type:"POST",url:tpr.cfg("api_prefix")+"record-answer/",data:c,success:function(c){a.removeSubmittedTimeTaken(b)},error:function(){}})},V.prototype.updateSubmitData=function(a){a=a||L,!a.length,this.submit_data=a.find("form").serialize(),this.submit_data+="&action="+(this.action||"skip"),this.submit_data+="&time_taken="+this.time_taken};var W=".js-question",X=".js-ques-list-option-item",Y=X+".is-selected",Z=".js-ques-mx-option-item",aa=Z+".is-selected";return{init:a,q_data:function(a){}}}(),tpr.ContinuousQuestion=function(a){this.id=a.question_id,this.goal_id=a.goal_id,this.style=a.question_style,this.seen=!1,this.seen_submitted=!1,this.submit_in_progress=!1,this.action_submitted=!1,this.time_taken=0,this.user_answer_available=!1,this.question=a},tpr.ContinuousQuestion.prototype.setUserAnswerAvailable=function(a){this.user_answer_available=a?!0:!1},tpr.testContinuousPage=function(){"use strict";function a(a){var b=new tpr.ContinuousQuestion(a);ga[a.sequence_no]=b,S||(S=a.sequence_no),a.sequence_no>T?T=a.sequence_no:a.sequence_no<S&&(S=a.sequence_no),I.append(a.html),setTimeout(function(){tpr.web.delayLoadImages(I),MathJax.Hub.Queue(["Typeset",MathJax.Hub,"ques-"+a.sequence_no])},100)}function b(a){return _.isUndefined(ga[a])?void 0:ga[a]}function c(a){return!_.isUndefined(ga[a+1])}function d(a){return 1>=a||S>=a?!1:!_.isUndefined(ga[a-1])}function e(b,c,d){function e(){S&&0!==S||(v.find(".js-loading-title").html("Failed to load questions"),v.find(".js-loading-dots").remove(),v.show(),setTimeout(function(){window.location=da},500))}c=c||6;for(var f,g=P.length,h="",i=0;g>i;i++)h+="goal_ids="+P[i],g-1>i&&(h+="&");f=ca+"assessment-questions/?"+h,$.ajax({type:"GET",url:f,data:{start:b,n:c},success:function(b){"success"==b.status?(_.each(b.questions,function(b){a(b)}),d&&d()):e()},error:function(){e()}})}function f(a){t=$(".js-test-tool-wrapper"),u=t.find(".js-test-tool"),v=u.find(".js-loading-view"),w=u.find(".js-sidebar"),x=u.find(".js-sidebar-overlay"),y=u.find(".js-primary-btn-bottom"),z=u.find(".js-loading-view-bottom"),A=u.find(".js-content-area"),B=u.find(".js-header-timer"),C=B.find(".js-timer-title"),D=u.find(".js-qnav-prev"),E=u.find(".js-qnav-next"),F=u.find(".js-btn-finish-assessment"),G=$("#test_tool_modals_overlay"),H=u.find(".js-goals-list"),I=u.find(".js-ques-wrapper"),p(),q(),J=a.course_slug,K=a.subject_slug,L=a.chapter_slug,M=a.chapter_id,N=a.board_slug,O=a.klass_slug,ba=a.subject_has_classwise_split,P=a.goal_ids,Q=parseInt(a.start_qno,10)||1,R=0,S=0,T=0,ga=[],X=!1,Y=!1,Z=!1,aa=!1;var b=t.find(".js-test-timer-minutes"),c=t.find(".js-test-timer-seconds");ba?(ca=tpr.cfg("api_prefix")+J+"/"+K+"/"+N+"/"+O+"/"+L+"/",da="/"+J+"/"+K+"/"+N+"/"+O+"/"+L+"/"):(ca=tpr.cfg("api_prefix")+J+"/"+K+"/"+L+"/",
da="/"+J+"/"+K+"/"+L+"/"),ea=new CountupTimer({onTick:function(){b.text(ea.fHMins),c.text(ea.fSecs)},onComplete:function(){}}),e(Q,6,function(){g(Q),v.hide()})}function g(a){var c=0;if(V){var d=W;c=320,d.addClass("fade-out").removeClass("fade-in"),setTimeout(function(){d.addClass("hide invisible")},300)}B.hide(),ea.reset(),V=b(a),U=a,setTimeout(function(){W=I.find("#ques-"+U),W.removeClass("hide"),setTimeout(function(){W.removeClass("invisible").addClass("fade-in"),A.animate({scrollTop:0},500)},0),V.action_submitted||(B.show(),ea.start()),C.html("Time Elapsed"),B.removeClass("hide"),m(),aa=!0,setTimeout(function(){k(V.goal_id),aa=!1},fa)},c),o()}function h(){!d(U)||Z||aa||(Z=!0,y.data("is-processing",!0),setTimeout(function(){g(U-1),y.data("is-processing",!1),Z=!1},200))}function i(){Z||aa||(Z=!0,y.data("is-processing",!0),c(U)&&setTimeout(function(){var a=U+1;g(a),y.data("is-processing",!1),Z=!1},200))}function j(){Z||aa||(Z=!0,y.data("is-processing",!0),c(R)&&setTimeout(function(){var a=R+1;g(a),y.data("is-processing",!1),Z=!1},200))}function k(a){H.find(".js-goal").removeClass("is-active");var b=H.find("#goal-"+a);b.addClass("is-active"),H.hide().show(0);var c=0,d=60,e=b.prev();e.length&&(c=w.scrollTop()+e.offset().top-(d+10)),w.animate({scrollTop:c},"slow")}function l(a,b){var c=H.find("#goal-"+a),d=c.find(".js-progress"),e=c.find(".js-score"),f=c.find(".js-meter-fill"),g=parseInt(c.data("progress"),10)||0,h=b.score;f.css({width:b.score+"%"});var i="color-prog-0p";i=b.score<=0?"color-prog-0p":b.score<=25?"color-prog-25p":b.score<=50?"color-prog-50p":b.score<=75?"color-prog-75p":"color-prog-100p",d.removeClass("color-prog-0p color-prog-25p color-prog-50p color-prog-75p color-prog-100p").addClass(i),h>=0&&(h>g?c.addClass("improved"):c.addClass("deteriorated")),setTimeout(function(){e.html(Math.ceil(b.score)+"%")},200),setTimeout(function(){c.removeClass("improved deteriorated")},500)}function m(){V.submit_in_progress?(E.removeClass("is-active"),y.addClass("hide"),z.removeClass("hide")):V.action_submitted?(U!=R?E.addClass("is-active"):E.removeClass("is-active"),y.html("Next").removeClass("hide grey"),z.addClass("hide")):(E.removeClass("is-active"),V.user_answer_available?y.removeClass("grey").html("Submit"):y.html("Skip").addClass("grey")),d(U)&&!V.submit_in_progress?D.addClass("is-active"):D.removeClass("is-active")}function n(){V.user_answer_available?y.html("Submit").removeClass("grey"):y.html("Skip").addClass("grey")}function o(){var a=T-U;3>a&&!X&&(X=!0,e(T+1,6,function(){X=!1}))}function p(){I.on("click",ia,function(a){a.preventDefault(),a.stopPropagation();var b=$(a.target).closest(ia),c=b.closest(ha);if(c.data("attempted")!==!0&&b.hasClass("is-clickable")){var d=c.data("style")||"";if(b.hasClass("is-selected")){var e=c.find(ja).length||0;return 1>=e&&(V.setUserAnswerAvailable(!1),n()),b.find("input").prop("checked",!1),b.removeClass("is-selected"),void tpr.segment.sendEvent("ui.tapped",{ui_element_name:b.index()+1,question_id:V.id||0,goal_id:V.goal_id||0,question_type:V.style.replace(" ","_"),body:"is_now_deselected"})}if(tpr.segment.sendEvent("ui.tapped",{ui_element_name:b.index()+1,question_id:V.id||0,goal_id:V.goal_id||0,question_type:V.style.replace(" ","_"),body:"is_now_selected"}),"multiple correct"!=d){var f=c.find(ja);f.length&&f.each(function(){$(this).find("input").prop("checked",!1),$(this).removeClass("is-selected")})}b.find("input").prop("checked",!0),b.addClass("is-selected"),V.setUserAnswerAvailable(!0),n()}}),I.on("click",ka,function(a){a.preventDefault(),a.stopPropagation();var b=$(a.target).closest(ka),c=b.closest(ha);if(c.data("attempted")!==!0&&b.hasClass("is-clickable")){if(b.hasClass("is-selected")){var d=c.find(la).length||0;return 1>=d&&(V.setUserAnswerAvailable(!1),n()),b.find("input").prop("checked",!1),b.removeClass("is-selected"),void tpr.segment.sendEvent("ui.tapped",{ui_element_name:b.data("choice-id")+1,question_id:V.id||0,goal_id:V.goal_id||0,question_type:V.style.replace(" ","_"),body:"is_now_deselected"})}tpr.segment.sendEvent("ui.tapped",{ui_element_name:b.data("choice-id")+1,question_id:V.id||0,goal_id:V.goal_id||0,question_type:V.style.replace(" ","_"),body:"is_now_selected"}),b.find("input").prop("checked",!0),b.addClass("is-selected"),V.setUserAnswerAvailable(!0),n()}}),I.on("keyup",".js-blank-input",function(a){var b=$(a.target).closest(".js-blank-input");b.closest(ha);b.val()?V.setUserAnswerAvailable(!0):V.setUserAnswerAvailable(!1),n()}),I.on("click",".js-ques-bookmark",function(a){var b=$(a.target).closest(".js-ques-bookmark"),c=b.closest(ha),d=c.data("id")||0,e=c.data("is-bookmarked")||0,f=b.data("in-progress")||0,g="Bookmarked",h="is_now_checked";if(!f){b.addClass("is-processing"),b.data("in-progress",1);var i={question_id:d};e&&(i.action="remove",g="Unbookmarked",h="is_now_unchecked"),tpr.track.sendEvent({ga:{category:"Assessment",action:g+" a Question",label:d}}),tpr.segment.sendEvent("ui.tapped",{ui_element_name:"bookmark",body:h,question_id:d,goal_id:V.goal_id||0,question_type:V.style.replace(" ","_")}),$.ajax({type:"POST",url:tpr.cfg("api_prefix")+tpr.cfg("course_slug")+"/bookmark/",data:i,success:function(a){"success"==a.status&&(e?(c.data("is-bookmarked",0),b.removeClass("is-active")):(c.data("is-bookmarked",1),b.addClass("is-active"))),b.removeClass("is-processing"),b.data("in-progress",0)},error:function(a,c,d){b.removeClass("is-processing"),b.data("in-progress",0)}})}}),I.on("click",".js-report-error-btn",function(){var a=$(this).closest(ha);tpr.track.sendEvent({ga:{category:"Assessment",action:"Clicked report error",label:L}}),tpr.segment.sendEvent("ui.tapped",{ui_element_name:"report_error",question_id:V.id||0,goal_id:V.goal_id||0,question_type:V.style.replace(" ","_")}),$.pubsub.publish("modal.question.report_error",{ctx:{question_id:a.data("id"),trk:{ga:{category:"Assessment",action:"Submitted Error",label:L}}}})}),I.on("click",".js-ask-doubt-btn",function(a){var b=$(this).closest(ha);tpr.track.sendEvent({ga:{category:"Assessment",action:"Clicked ask doubt",label:L}}),tpr.segment.sendEvent("ui.tapped",{ui_element_name:"ask_doubt",question_id:V.id||0,goal_id:V.goal_id||0,question_type:V.style.replace(" ","_")}),$.pubsub.publish("modal.question.doubts",{ctx:{question_id:b.data("id"),trk:{ga:{category:"Assessment",action:"Submitted Doubt",label:L}}}})})}function q(){y.click(function(a){if(a.preventDefault(),!y.data("is-processing")&&!Z){if(V.action_submitted)return c(R)&&(tpr.track.sendEvent({ga:{category:"Assessment",action:"Moved to Another Question",label:L}}),tpr.segment.sendEvent("ui.tapped",{ui_element_name:"next",question_id:V.id||0,goal_id:V.goal_id||0,question_type:V.style.replace(" ","_")})),void j();y.data("is-processing",!0).addClass("hide"),z.removeClass("hide"),ea.pause(),C.html("Time Taken"),V.time_taken=1e3*ea.timeTaken();var b=V.style||"",d=W.find("form").serializeArray(),e="",f=[];_.contains(["single correct","multiple correct","assertion"],b)?(W.find(ia).removeClass("is-clickable"),W.find(ja).each(function(a,b){f.push($(b).index()+1)}),e=f.join(",")):"matrix"==b?(W.find(ka).removeClass("is-clickable"),W.find(la).each(function(a,b){f.push($(b).data("choice-id")+1)}),e=f.join(",")):"blank"==b&&(W.find("input[name='choices']").attr("disabled",!0),e=W.find("[name=choices]").val()),tpr.track.sendEvent({ga:{category:"Assessment",action:V.user_answer_available?"Submitted an Answer":"Skipped a Question",label:L}}),tpr.segment.sendEvent("ui.tapped",{ui_element_name:V.user_answer_available?"submit":"skip",body:e,question_id:V.id||0,goal_id:V.goal_id||0,question_type:V.style.replace(" ","_")}),s(V.user_answer_available?"answer":"skip",d)}}),D.click(function(a){a.preventDefault(),D.hasClass("is-active")&&(tpr.segment.sendEvent("ui.tapped",{ui_element_name:"previous_arrow",question_id:V.id||0,goal_id:V.goal_id||0,question_type:V.style.replace(" ","_")}),tpr.track.sendEvent({ga:{category:"Assessment",action:"Moved to Previous Question",label:L}}),h())}),E.click(function(a){a.preventDefault(),E.hasClass("is-active")&&(tpr.segment.sendEvent("ui.tapped",{ui_element_name:"next_arrow",question_id:V.id||0,goal_id:V.goal_id||0,question_type:V.style.replace(" ","_")}),i())}),F.click(function(a){a.preventDefault(),tpr.track.sendEvent({ga:{category:"Assessment",action:"Finished Assessment",label:L}}),v.find(".js-loading-title").html("Finishing assessment"),v.show(),r()})}function r(){function a(){r()}$.ajax({type:"POST",url:tpr.cfg("api_prefix")+J+"/"+K+"/"+L+"/assessment-end/",data:{csrfmiddlewaretoken:tpr.cfg("csrf_token")},success:function(b){"success"==b.status?window.location=da:a()},error:function(){setTimeout(a,5e3)}})}function s(a,b){function c(){h.submit_in_progress=!1,m(),_.contains(["single correct","multiple correct","assertion"],V.style)?i.find(ia).addClass("is-clickable"):"matrix"==V.style?i.find(".js-ques-matrix-option-item").addClass("is-clickable"):"blank"==V.style&&i.find("input[name='choices']").attr("disabled",!1),y.data("is-processing",!1),V.user_answer_available?y.html("Submit").removeClass("grey hide"):y.html("Skip").addClass("grey").removeClass("hide"),z.addClass("hide")}function d(a){var b=a.right_answers,c=b[b.length-1];i.find(ia).each(function(){var b=$(this),d=b.data("choice-id");b.hasClass("is-selected")&&b.addClass("is-wrong"),_.contains(a.right_answers,d)&&b.removeClass("is-wrong").addClass("is-correct"),c===d&&e(b)})}function e(a){a.append('<div class="solution_text_container hide js-solution-text"><div class="solution_heading">Solution</div></div>')}function f(a){i.find(ka).each(function(){var b=$(this),c=b.data("choice-id")+"";b.hasClass("is-selected")&&b.addClass("is-wrong"),_.contains(a.right_answers,c+"")&&b.removeClass("is-wrong").addClass("is-correct")})}function g(a){var b=i.find("input[name='choices']"),c=i.find(".js-user-ans-display"),d=i.find(".js-correct-ans-display");c.find(".js-user-ans").text(b.val()),a.is_correctly_answered?c.addClass("is-correct").removeClass("hide"):(V.user_answer_available&&c.addClass("is-wrong").removeClass("hide"),d.find(".js-correct-ans").text(a.right_answer),d.removeClass("hide")),b.hide()}var h=V,i=W;b.push({name:"chapter_id",value:M}),b.push({name:"test_type",value:"assessment"}),b.push({name:"action",value:a}),b.push({name:"time_taken",value:h.time_taken}),h.submit_in_progress=!0,m(),$.ajax({type:"POST",url:tpr.cfg("api_prefix")+"record-answer/",data:b,success:function(b){if("success"==b.status){h.action_submitted=!0,h.submit_in_progress=!1,R=U;var e=i.find(".js-question-tile");e.addClass("is-attempted"),"answer"==a&&(b.is_correctly_answered?e.addClass("is-correct"):e.addClass("is-wrong")),_.contains(["single correct","multiple correct","assertion"],V.style)?d(b):"matrix"==V.style?f(b):"blank"==V.style&&g(b),i.find(".js-qheader-options").removeClass("hide");var j=i.find(".js-solution");if(j.length)if(_.contains(["single correct","multiple correct","assertion"],V.style)){var k=j.find(".js-solution-content");i.find(".js-solution-text").append(k).removeClass("hide")}else j.removeClass("hide"),A.animate({scrollTop:A.height()},"slow");y.data("is-processing",!1).html("Next").removeClass("hide"),z.addClass("hide"),m(),setTimeout(function(){l(h.goal_id,b)},100)}else c()},error:function(a,b,d){c()}})}var t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,aa,ba,ca,da,ea,fa=300,ga=[],ha=".js-question",ia=".js-ques-list-option-item",ja=ia+".is-selected",ka=".js-ques-mx-option-item",la=ka+".is-selected";return{init:f}}(),tpr.walkthroughTestContinuousPage=function(){"use strict";function a(a){var b=new tpr.ContinuousQuestion(a);Z[a.sequence_no]=b,O||(O=a.sequence_no),a.sequence_no>P?P=a.sequence_no:a.sequence_no<O&&(O=a.sequence_no),G.append(a.html),setTimeout(function(){tpr.web.delayLoadImages(G),MathJax.Hub.Queue(["Typeset",MathJax.Hub,"ques-"+a.sequence_no])},100)}function b(a){return _.isUndefined(Z[a])?void 0:Z[a]}function c(a){return!_.isUndefined(Z[a+1])}function d(a){return 1>=a||O>=a?!1:!_.isUndefined(Z[a-1])}function e(a){r=$(".js-test-tool-wrapper"),s=r.find(".js-test-tool"),t=s.find(".js-loading-view"),u=s.find(".js-sidebar"),v=s.find(".js-sidebar-overlay"),w=s.find(".js-primary-btn-bottom"),x=s.find(".js-loading-view-bottom"),y=s.find(".js-content-area"),z=s.find(".js-header-timer"),A=z.find(".js-timer-title"),B=s.find(".js-qnav-prev"),C=s.find(".js-qnav-next"),D=s.find(".js-btn-finish-assessment"),E=$("#test_tool_modals_overlay"),F=s.find(".js-goals-list"),G=s.find(".js-ques-wrapper"),n(),o(),H=a.course_slug,I=a.subject_slug,J=a.chapter_slug,K=a.chapter_id,L=a.goal_ids,M=parseInt(a.start_qno,10)||1,N=0,O=0,P=0,Z=[],T=!1,U=!1,V=!1,W=!1;var b=r.find(".js-test-timer-minutes"),c=r.find(".js-test-timer-seconds");X=new CountupTimer({onTick:function(){b.text(X.fHMins),c.text(X.fSecs)},onComplete:function(){}}),t.hide(),t.hide()}function f(a){var c=0;if(R){var d=S;c=320,d.addClass("fade-out").removeClass("fade-in"),setTimeout(function(){d.addClass("hide invisible")},300)}z.hide(),R=b(a),Q=a,setTimeout(function(){S=G.find("#ques-"+Q),S.removeClass("hide"),setTimeout(function(){S.removeClass("invisible").addClass("fade-in"),y.animate({scrollTop:0},500)},0),R.action_submitted||z.show(),A.html("Time Elapsed"),z.removeClass("hide"),k(),W=!0,setTimeout(function(){j(R.goal_id),W=!1},Y)},c),m()}function g(){!d(Q)||V||W||(V=!0,w.data("is-processing",!0),setTimeout(function(){f(Q-1),w.data("is-processing",!1),V=!1},200))}function h(){V||W||(V=!0,w.data("is-processing",!0),c(Q)&&setTimeout(function(){var a=Q+1;f(a),w.data("is-processing",!1),V=!1},200))}function i(){V||W||(V=!0,w.data("is-processing",!0),c(N)&&setTimeout(function(){var a=N+1;f(a),w.data("is-processing",!1),V=!1},200))}function j(a){F.find(".js-goal").removeClass("is-active");var b=F.find("#goal-"+a);b.addClass("is-active"),F.hide().show(0);var c=0,d=60,e=b.prev();e.length&&(c=u.scrollTop()+e.offset().top-(d+10)),u.animate({scrollTop:c},"slow")}function k(){R.submit_in_progress?(C.removeClass("is-active"),w.addClass("hide"),x.removeClass("hide")):R.action_submitted?(Q!=N?C.addClass("is-active"):C.removeClass("is-active"),w.html("Next").removeClass("hide grey"),x.addClass("hide")):(C.removeClass("is-active"),R.user_answer_available?w.removeClass("grey").html("Submit"):w.html("Skip").addClass("grey")),d(Q)&&!R.submit_in_progress?B.addClass("is-active"):B.removeClass("is-active")}function l(){R.user_answer_available?w.html("Submit").removeClass("grey"):w.html("Skip").addClass("grey")}function m(){var a=P-Q;3>a&&!T&&(T=!0)}function n(){G.on("click",ba,function(a){a.preventDefault(),a.stopPropagation();var b=$(a.target).closest(ba),c=b.closest(aa);if(c.data("attempted")!==!0&&b.hasClass("is-clickable")){var d=c.data("style")||"";if(b.hasClass("is-selected")){var e=c.find(ca).length||0;return 1>=e&&(R.setUserAnswerAvailable(!1),l()),b.find("input").prop("checked",!1),void b.removeClass("is-selected")}if("multiple correct"!=d){var f=c.find(ca);f.length&&f.each(function(){$(this).find("input").prop("checked",!1),$(this).removeClass("is-selected")})}b.find("input").prop("checked",!0),b.addClass("is-selected"),R.setUserAnswerAvailable(!0),l()}}),G.on("click",da,function(a){a.preventDefault(),a.stopPropagation();var b=$(a.target).closest(da),c=b.closest(aa);if(c.data("attempted")!==!0&&b.hasClass("is-clickable")){if(b.hasClass("is-selected")){var d=c.find(ea).length||0;return 1>=d&&(R.setUserAnswerAvailable(!1),l()),b.find("input").prop("checked",!1),void b.removeClass("is-selected")}b.find("input").prop("checked",!0),b.addClass("is-selected"),R.setUserAnswerAvailable(!0),l()}}),G.on("keyup",".js-blank-input",function(a){var b=$(a.target).closest(".js-blank-input");b.closest(aa);b.val()?R.setUserAnswerAvailable(!0):R.setUserAnswerAvailable(!1),l()}),G.on("click",".js-ques-bookmark",function(a){var b=$(a.target).closest(".js-ques-bookmark"),c=b.closest(aa),d=c.data("id")||0,e=c.data("is-bookmarked")||0,f=b.data("in-progress")||0,g="Bookmarked";if(!f){b.addClass("is-processing"),b.data("in-progress",1);var h={question_id:d};e&&(h.action="remove",g="Unbookmarked"),tpr.track.sendEvent({ga:{category:"Assessment",action:g+" a Question",label:d}}),$.ajax({type:"POST",url:tpr.cfg("api_prefix")+tpr.cfg("course_slug")+"/bookmark/",data:h,success:function(a){"success"==a.status&&(e?(c.data("is-bookmarked",0),b.removeClass("is-active")):(c.data("is-bookmarked",1),b.addClass("is-active"))),b.removeClass("is-processing"),b.data("in-progress",0)},error:function(a,c,d){b.removeClass("is-processing"),b.data("in-progress",0)}})}}),G.on("click",".js-report-error-btn",function(){var a=$(this).closest(aa);tpr.track.sendEvent({ga:{category:"Assessment",action:"Clicked report error",label:J}}),$.pubsub.publish("modal.question.report_error",{ctx:{question_id:a.data("id"),trk:{ga:{category:"Assessment",action:"Submitted Error",label:J}},module:"walkthrough"}})}),G.on("click",".js-ask-doubt-btn",function(a){var b=$(this).closest(aa);tpr.track.sendEvent({ga:{category:"Assessment",action:"Clicked ask doubt",label:J}}),$.pubsub.publish("modal.question.doubts",{ctx:{question_id:b.data("id"),trk:{ga:{category:"Assessment",action:"Submitted Doubt",label:J}},module:"walkthrough"}})})}function o(){w.click(function(a){if(a.preventDefault(),!w.data("is-processing")&&!V){if(R.action_submitted)return c(N)&&tpr.track.sendEvent({ga:{category:"Assessment",action:"Moved to Another Question",label:J}}),void i();w.data("is-processing",!0).addClass("hide"),x.removeClass("hide"),A.html("Time Taken"),R.time_taken=1e3*X.timeTaken();var b=R.style||"",d=S.find("form").serializeArray();_.contains(["single correct","multiple correct","assertion"],b)?S.find(ba).removeClass("is-clickable"):"matrix"==b?S.find(da).removeClass("is-clickable"):"blank"==b&&S.find("input[name='choices']").attr("disabled",!0),tpr.track.sendEvent({ga:{category:"Assessment",action:R.user_answer_available?"Submitted an Answer":"Skipped a Question",label:J}}),q(R.user_answer_available?"answer":"skip",d)}}),B.click(function(a){a.preventDefault(),B.hasClass("is-active")&&(tpr.track.sendEvent({ga:{category:"Assessment",action:"Moved to Previous Question",label:J}}),g())}),C.click(function(a){a.preventDefault(),C.hasClass("is-active")&&h()}),D.click(function(a){a.preventDefault(),tpr.track.sendEvent({ga:{category:"Assessment",action:"Finished Assessment",label:J}}),tpr.segment.sendEvent("ui.tapped",{ui_element_name:"finish"}),p()})}function p(){function a(){p()}$.ajax({type:"POST",url:tpr.cfg("api_prefix")+H+"/"+I+"/"+J+"/assessment-end/",data:{csrfmiddlewaretoken:tpr.cfg("csrf_token")},success:function(b){if("success"==b.status){var c="/"+H+"/"+I+"/"+J+"/";window.location=c}else a()},error:function(){setTimeout(a,5e3)}})}function q(a,b){function c(a){var b=a.right_answers,c=b[b.length-1];h.find(ba).each(function(){var b=$(this),e=b.data("choice-id");b.hasClass("is-selected")&&b.addClass("is-wrong"),_.contains(a.right_answers,e)&&b.removeClass("is-wrong").addClass("is-correct"),c===e&&d(b)})}function d(a){a.append('<div class="solution_text_container hide js-solution-text"><div class="solution_heading">Solution</div></div>')}function e(a){h.find(da).each(function(){var b=$(this),c=b.data("choice-id")+"";b.hasClass("is-selected")&&b.addClass("is-wrong"),_.contains(a.right_answers,c+"")&&b.removeClass("is-wrong").addClass("is-correct")})}function f(a){var b=h.find("input[name='choices']"),c=h.find(".js-user-ans-display"),d=h.find(".js-correct-ans-display");c.find(".js-user-ans").text(b.val()),a.is_correctly_answered?c.addClass("is-correct").removeClass("hide"):(R.user_answer_available&&c.addClass("is-wrong").removeClass("hide"),d.find(".js-correct-ans").text(a.right_answer),d.removeClass("hide")),b.hide()}var g=R,h=S;b.push({name:"chapter_id",value:K}),b.push({name:"test_type",value:"assessment"}),b.push({name:"action",value:a}),b.push({name:"time_taken",value:g.time_taken}),g.submit_in_progress=!0,k(),$.ajax({type:"POST",url:tpr.cfg("api_prefix")+"record-answer/",data:b,success:function(b){if("success"==b.status){g.action_submitted=!0,g.submit_in_progress=!1,N=Q;var d=h.find(".js-question-tile");d.addClass("is-attempted"),"answer"==a&&(b.is_correctly_answered?d.addClass("is-correct"):d.addClass("is-wrong")),_.contains(["single correct","multiple correct","assertion"],R.style)?c(b):"matrix"==R.style?e(b):"blank"==R.style&&f(b),h.find(".js-qheader-options").removeClass("hide");var i=h.find(".js-solution");if(i.length)if(_.contains(["single correct","multiple correct","assertion"],R.style)){var j=i.find(".js-solution-content");h.find(".js-solution-text").append(j).removeClass("hide")}else i.removeClass("hide"),y.animate({scrollTop:y.height()},"slow");"answer"==a&&b.is_correctly_answered&&($("#stage5").fadeOut(500),$("#stage6").fadeIn(500),$(".dl").animate({right:"0"},"slow"),$(".dl .pull_bar").hide(),$(".js-demo_overlay").show()),w.data("is-processing",!1).html("Next").removeClass("hide"),x.addClass("hide"),setTimeout(function(){},100)}else w.data("is-processing",!1).removeClass("hide"),x.addClass("hide")},error:function(a,b,c){w.data("is-processing",!1).removeClass("hide"),x.addClass("hide")}})}var r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y=300,Z=[],aa=".js-question",ba=".js-ques-list-option-item",ca=ba+".is-selected",da=".js-ques-mx-option-item",ea=da+".is-selected";return{init:e,addLocalQuestion:a,displayQuestion:f}}(),tpr.walkthrough=function(){"use strict";function a(){m=$(".walkthrough"),o=$(".subjectList_item"),n=m.find(".js-walkthrough_demoText"),p=m.find(".js-walkthrough_stageChecks"),q=m.find(".js-walkthrough_checkImg"),r=m.find(".js-walkthrough_checkText"),$("html, body").animate({scrollTop:0}),$(".js-demo_overlay").show(),m.show(),n.hide(),p.hide(),q.css("color","#999"),r.css("color","#999"),m.find(".no").click(function(){m.fadeOut(),$(".js-demo_overlay").fadeOut(),$(".js-tab_overlay").fadeOut(),$(".pHeader").css("z-index","initial"),o.css("z-index","initial"),$(".glow_shadow").removeClass("glow_shadow"),location.href="/"+tpr.cfg("course_slug")+"/"})}function b(){n.hide(),n.eq(-1).show()}function c(){a(),n.eq(0).fadeIn(500),m.find(".yes").click(function(){$("html, body").animate({scrollTop:0},"slow"),$("#stage1").fadeOut(500,function(){n.eq(-1).show(),$(".tab_overlay").show(),$(".pHeader").css("z-index",1011),$("#stage2").fadeIn(500),o.css("z-index",1001),p.fadeIn("500"),tpr.segment.setScreenName("demo_select_subject"),tpr.segment.sendEvent("ui.viewed")}),o.addClass("glow_shadow")})}function d(){a(),m.show(),$("html, body").animate({scrollTop:0}),$(".chapterTile").eq(0).css("z-index",1001).addClass("glow_shadow"),$(".chapterTile").eq(1).css("z-index",1001).addClass("glow_shadow"),$(".js-tab_overlay").show(),$(".js-demo_overlay").show(),m.show(),b();var c=$(".pHeader_content").text().trim();$(".toursubject").html(c),m.find("#stage2").fadeOut(500,function(){m.find("#stage3").fadeIn(500)}),p.fadeIn("500"),q.css("color","#999"),q.eq(0).css("color","#4caf79"),r.eq(0).css("color","rgb(211,211,211)"),$(".pHeader").css("z-index",1011)}function e(){a(),d(),$("html, body").animate({scrollTop:0}),$(".js-demo_overlay").show(),$(".js-tab_overlay").show();var b=$(".pHeader_content").text().trim();$(".tourchapter").html(b),m.show(),n.hide(),m.find("#stage3").fadeOut(500,function(){m.find("#stage4").fadeIn(500)}),n.eq(-1).show(),m.find(".walkthrough_stageChecks").fadeIn("500"),q.css("color","#999"),m.find(".js-walkthrough_checkImg img").addClass("desaturate",1e3,"easeOutBounce"),$(".pHeader").css("z-index",1010),q.eq(0).css("color","#4caf79"),q.eq(1).css("color","#4caf79"),r.eq(0).css("color","rgb(211,211,211)"),r.eq(1).css("color","rgb(211,211,211)"),$(".table.progBlock").css({"z-index":1001,position:"relative"}),$(".table.progBlock").addClass("glow_shadow")}function f(){b(),$("#stage6").show(),m.animate({right:"0"},"slow"),m.find(".js-walkthrough_pullBar").hide(),$(".js-demo_overlay").show()}function g(){b(),$("#stage8").show(),m.animate({right:"0"},"slow"),m.find(".js-walkthrough_pullBar").hide(),$(".js-demo_overlay").show(),q.eq(3).css("color","#4caf79"),r.eq(3).css("color","rgb(211,211,211)")}function h(a){tpr.segment.sendEvent("ui.tapped",{ui_element_name:"skip"}),b(),j(a),$("#stage9").show(),m.animate({right:"0"},"slow"),m.find(".js-walkthrough_pullBar").hide(),$(".js-demo_overlay").show(),tpr.segment.setScreenName("demo_try_again"),tpr.segment.sendEvent("ui.viewed")}function i(a){b(),j(a),$("#stage7").show(),m.animate({right:"0"},"slow"),m.find(".js-walkthrough_pullBar").hide(),$(".js-demo_overlay").show(),tpr.segment.setScreenName("demo_try_again"),tpr.segment.sendEvent("ui.viewed")}function j(a){$("answer").html(a)}function k(a,b){var c,d=$(".js-ques-list-option-item"),e=$(".js-ques-list-option-item.is-selected"),g=$(".js-ques-list-option-item.is-selected").children(".ques_option_label").text(),j=$(".js-sidebar").find(".js-goal.is-active");if(!e.length)return h(b),d.addClass("is-clickable"),d.removeClass("is-selected"),0;if(tpr.segment.sendEvent("ui.tapped",{ui_element_name:"submit"}),g!=b)return d.addClass("is-clickable"),d.removeClass("is-selected"),$(".js-primary-btn-bottom").html("Skip").addClass("grey").removeClass("hide"),i(b),0;c=$(".js-solution-content").eq(parseInt(a)-1),$(".js-question-tile").eq(parseInt(a)-1).addClass("is-correct is-attempted"),e.addClass("is-correct"),e.append('<div class="solution_text_container js-solution-text"><div class="solution_heading">Solution</div></div>');for(var k=0;4>k;k++)d.eq(k).removeClass("is-clickable");d.removeClass("is-selected"),e=null,$(".js-solution-text").eq(parseInt(a)-1).append(c),$(".js-primary-btn-bottom").html("NEXT");var l=parseInt(j.find(".js-score").html());return j.find(".js-progress").removeClass("color-prog-0p").addClass("color-prog-25p"),j.find(".js-score").html(l+4+"%"),j.find(".js-meter-fill")[0].style.width=l+4+"%",f(),$(".js-goal.is-active").addClass("glow_shadow"),1}function l(b){a(),m.show(),$(".js-demo_overlay").show(),n.hide(),n.eq(4).fadeIn(500),m.find(".yes").click(function(){var a=$(this);return""===$("#stage8")[0].style.display?void(location.href="/"+tpr.cfg("course_slug")+"/"+b.subject_slug+"/"+b.chapter_slug+"/"):($(".js-goal.is-active").removeClass("glow_shadow"),$(".js-demo_overlay").hide(),void m.animate({right:"-23%"},"slow",function(){var b,c=a.closest(".js-walkthrough_demoText").attr("id");"stage5"==c||"stage6"==c?b="demo_question_1":("stage7"==c||"stage9"==c||"stage6a"==c)&&(b="demo_question_2"),m.find(".js-walkthrough_pullBar").show(),b&&(tpr.segment.setScreenName(b),tpr.segment.sendEvent("ui.viewed"))}))}),m.find(".no").click(function(){m.fadeOut("slow"),$(".js-demo_overlay").fadeOut(),location.href="/"+tpr.cfg("course_slug")+"/"}),m.find(".js-walkthrough_pullBar").click(function(){m.animate({right:"0"},"slow"),m.find(".js-walkthrough_pullBar").hide(),$(".js-demo_overlay").show()}),n.eq(-1).show(),p.fadeIn("500"),q.css("color","#999"),$(".pHeader").css("z-index",1010),q.eq(0).css("color","#4caf79"),q.eq(1).css("color","#4caf79"),q.eq(2).css("color","#4caf79"),r.eq(0).css("color","rgb(211,211,211)"),r.eq(1).css("color","rgb(211,211,211)"),r.eq(2).css("color","rgb(211,211,211)"),$(".table.progBlock").css({"z-index":1001,position:"relative"}),$(".table.progBlock").addClass("glow_shadow"),$ques_wrapper.children().eq(0).removeClass("invisible hide").addClass("fade-in"),$ques_wrapper.children().eq(0).find(".ques_header_num").text(1),$ques_wrapper.children().eq(1).find(".ques_header_num").text(2)}var m,n,o,p,q,r;return{dashboard:c,subjectChapters:d,chapterOverview:e,chapterAssessment:l,try_question:k,finish_tour_side_pane:g}}(),tpr.tsReportPage=function(){"use strict";function a(){d=$(".page-testseries-report"),b(),c(),i(d)}function b(){var a=d.find(".js-subject-tab"),b=d.find(".js-subject-component");a.click(function(){var a=$(this),c=a.data("tab")||!1;if(!a.hasClass("is-active")){a.parent().find(".js-subject-tab").removeClass("is-active"),a.addClass("is-active"),b.addClass("hide");var e=d.find('.js-subject-component[data-tab-component="'+c+'"]');e.removeClass("hide"),h(e)}})}function c(){var a=d.find(".js-chapterwise-dropdown");a.click(function(){$(this).parent().toggleClass("is-expanded")})}var d,e=function(a,b){var c,d=0,e=b.length,f=new Array(e),g=new Array(e),h=new Array(e),i=new Array(e),j=new Array(e),k=0,l=[f,g,h,i];for(k=0;e>k;k++)j[k]=b[k].qno,f[k]=0,g[k]=0,h[k]=0,i[k]=0;for(k=0;e>k;k++)c=b[k],c.time>d&&(d=c.time),1==c.series?f[k]=c.time:2==c.series?g[k]=c.time:3==c.series&&(h[k]=c.time);if(d/=15,0!==d){var m=0;for(k=0;e>k;k++)m=d-(f[k]+g[k]+h[k]),m>0&&(i[k]=m)}else{var n=new Array(e);for(l.push(n),k=0;e>k;k++)i[k]=.6,n[k]=8}new Chartist.Bar("#"+a.attr("id"),{labels:j,series:l},{stackBars:!0,seriesBarDistance:1,axisX:{showGrid:!1},axisY:{offset:45,labelInterpolationFnc:function(a){return a+" sec"},scaleMinSpace:23}})},f=function(a,b){var c=b.length,d=new Array(c),e=new Array(c),f=new Array(c),g=new Array(c),h=new Array(c),i=0,j=[d,e,f,g];for(i=0;c>i;i++)h[i]=b[i].qno,d[i]=0,e[i]=0,f[i]=0,g[i]=0;var k=0,l=null;for(i=0;c>i;i++)l=b[i],l.avg_acc>k&&(k=l.avg_acc),1==l.series?d[i]=l.avg_acc:2==l.series?e[i]=l.avg_acc:f[i]=l.avg_acc;if(k/=15,0!==k){var m=0;for(i=0;c>i;i++)m=k-(d[i]+e[i]+f[i]),m>0&&(g[i]=m)}else{var n=new Array(c);for(j.push(n),i=0;c>i;i++)g[i]=.6,n[i]=8}new Chartist.Bar("#"+a.attr("id"),{labels:h,series:j},{stackBars:!0,seriesBarDistance:1,axisX:{showGrid:!1},axisY:{offset:45,labelInterpolationFnc:function(a){return a+" %"},scaleMinSpace:23}})},g=function(a,b){var c=b.length,d=new Array(c),e=new Array(c),f=0,g=null;for(e[0]="0",d[0]=0,f=1;c>f;f++)g=b[f],e[f]=g[0]+" min",d[f]=g[1];new Chartist.Line("#"+a.attr("id"),{labels:e,series:[d]},{low:0,showArea:!1,axisX:{showGrid:!0},axisY:{offset:60,labelInterpolationFnc:function(a){return a+" %"},scaleMinSpace:23}})},h=function(a){a.hasClass("charts-loaded")||a.each(function(){var a=$(this),b=$.parseJSON($("#timeData_subj"+a.attr("data-subject-id")+"_paper"+a.attr("data-section")).text());e(a.find(".ct-chart.advance_testSeries-time_per_question"),b),f(a.find(".ct-chart.advance_testSeries-accuracy_per_question"),b),a.addClass("charts-loaded")})},i=function(a){if(!a.hasClass("charts-loaded")){h(a.find(".js-subject-component:not(.hide)"));var b=a.find(".ct-chart.advance_testSeries-accuracy_over_time");b.each(function(){var a=$(this);g(a,$.parseJSON($("#accData_paper"+a.attr("data-section")).text()))}),a.addClass("charts-loaded")}};return{init:a}}(),tpr.contactPage=function(){"use strict";function a(){f=$(".js-page-contact-us"),g=f.find("form"),h=f.find(".js-loading-overlay"),i=h.find(".js-loading-dots"),j=h.find(".js-response-table"),c(),b()}function b(){var a=h.find(".js-btn-send-another");a.click(function(){f.find(".js-textarea").val(""),h.hide(),i.show(),j.hide()})}function c(){g.validate({rules:{name:{required:!0},email:{required:!0,email:!0},message:{required:!0}},messages:{name:{required:"Please enter your name"},email:{required:"Please enter your email address",email:"Please enter a valid email address"},query:{required:"Please enter your query"}},submitHandler:d})}function d(){h.show(),$.ajax({type:"POST",url:tpr.cfg("api_prefix")+"feedback/",data:g.serialize(),success:function(a){return"success"==a.status?(i.hide(),void j.show()):void e(a)},error:function(){e()}})}function e(a){var b=g.find(".js-err-msg"),c="Sorry, Some error occurred while submitting. Try again.";h.hide(),a&&a.message&&(c=a.message),b.html(c).show()}var f,g,h,i,j;return{init:a}}(),tpr.payment=function(){"use strict";function a(){var a=((Q.plan_validity||"")+" "+(Q.plan_name||"")).replace(/ /g,"_");return"_"===a?"":a}function b(){function b(a){P.html(""),N.data("processing",!0).hide(),O.show();var b=tpr.cfg("api_prefix")+"upgrade/"+toppr.config("course_slug")+"/";$.ajax({type:"POST",url:b,data:G.serialize(),success:function(a){if("success"==a.status&&a.payment_form){var b=$(a.payment_form).find("form#payment_form");$("<input>",{name:"dummy_button",value:"dummy_value"}).appendTo(b),b.css({display:"none"}),n.append(b),b.submit()}else a.redirect_url?window.location.href=a.redirect_url:h(a);
},error:function(){h()}})}function h(a){O.hide(),N.data("processing",!1).show();var b="Some error occurred. Please try after some time";a&&a.error&&(b=a.error),P.html(b)}n=$(".js-page-payment");var j=n.find(".js-upgrade-sec");o=j.filter("[data-section='package_groups']"),p=j.filter("[data-section='package_group_plans']"),q=j.filter("[data-section='payment_details']"),r=n.find(".js-package-group"),s=n.find(".js-package-plan"),v=n.find(".js-payment-method"),G=n.find("#details_form"),H=G.find("input[name='plan']"),I=G.find("input[name='coupon_code']"),J=G.find("input[name='payment_mode']"),K=G.find("input[name='terms']"),L=G.find(".js-cod-fields"),M=n.find(".js-orderSummaryTable"),N=n.find(".js-btn-pay"),O=n.find(".js-btn-pay-loading-dots"),P=n.find(".js-backend-error"),j.click(function(b){var f=$(this),g=f.data("section");return"package_groups"===g?void(f.hasClass("collapse")?(tpr.segment.sendEvent("ui.tapped",{ui_element_name:"change_year","package":a()}),c()):d()):"package_group_plans"===g?void(f.hasClass("collapse")&&t&&u&&(tpr.segment.sendEvent("ui.tapped",{ui_element_name:"change_plan","package":a()}),e())):void 0}),r.on("click",function(a){f($(this))}),s.on("click",function(a){g($(this))}),i(),v.click(function(){var b=$(this),c=b.data("method"),d=c;R=c,J.val(c),v.removeClass("is-selected"),b.addClass("is-selected"),G.fadeOut(200,function(){"cod"===c?L.show():L.hide(),G.fadeIn(300)}),"cod"==d?d="cash_pickup":"paytm"==d&&(d="paytm_wallet"),tpr.segment.sendEvent("ui.tapped",{ui_element_name:d,"package":a()}),setTimeout(function(){tpr.segment.setScreenName("upgrade.payment_details."+d),tpr.segment.sendEvent("ui.viewed",{})},0),m()}),N.click(function(){N.data("processing")||(tpr.segment.sendEvent("ui.tapped",{ui_element_name:N.text().toLowerCase().replace(" ","_"),"package":a()}),tpr.track.sendEvent({ev:{e:"Proceeded With Payment",course_slug:tpr.config("course_slug")},ga:{category:"Upgradations",action:"Proceeded with Payment",label:n.find("input[name='payment_mode']:checked").val()}}),setTimeout(function(){G.submit()},200))}),G.validate({ignore:"",rules:{plan:{required:!0},name:{required:!0},email:{required:!0,email:!0},phone:{required:!0,minlength:10,maxlength:10,digits:!0},address:{required:{depends:function(){return"cod"==R}}},city:{required:{depends:function(){return"cod"==R}}},state:{required:{depends:function(){return"cod"==R}}},pincode:{required:{depends:function(){return"cod"==R}},minlength:6,maxlength:6,digits:!0}},messages:{plan:"Please select a plan",name:"Please enter your name",email:{required:"Please enter your email address",email:"Please enter a valid email address"},phone:"Please enter a 10 digit phone number"},submitHandler:b});var k=r.filter("[data-default='1']");k&&k.length&&f(k,!0)}function c(a){o.removeClass("collapse"),p.addClass("collapse"),q.addClass("collapse"),tpr.segment.setScreenName("upgrade.course"),tpr.segment.sendEvent("ui.viewed");var b=o.find(".js-sec-heading");b.removeClass("can-change")}function d(){if(t&&!(t.length<=0)){o.addClass("collapse"),u||p.removeClass("collapse"),q.addClass("collapse");var a=o.find(".js-sec-heading");a.addClass("can-change")}}function e(){p.removeClass("collapse"),d(),q.addClass("collapse"),tpr.segment.setScreenName("upgrade.plan"),tpr.segment.sendEvent("ui.viewed");var a=p.find(".js-sec-heading");a.removeClass("can-change")}function f(a,b){h(),t=a;var c=a.data("group"),d=a.data("display-name");r.removeClass("is-selected"),a.addClass("is-selected");var e=o.find(".js-sec-heading"),f=e.find(".js-title"),g=e.find(".js-val");e.find(".js-num");b?(f.hide(),e.addClass("option-selected can-change"),g.html(d).fadeIn(0)):(g.fadeOut(0),f.fadeOut(150,function(){f.hide(),e.addClass("option-selected can-change"),g.html(d).fadeIn(300)}));var i=b?300:0;setTimeout(function(){var a=s.filter("[data-group='"+c+"']");s.addClass("hide"),a.removeClass("hide"),$(window).width()<768&&a.first().addClass("expand"),o.addClass("collapse"),p.removeClass("collapse")},i)}function g(a){if($(window).width()<768&&!a.hasClass("expand"))return s.removeClass("expand"),void a.addClass("expand");u=a;var b=a.data("id"),c=a.data("title"),d=a.data("price"),e=a.data("validity");s.removeClass("is-selected"),a.addClass("is-selected"),Q.plan_id=b,Q.plan_name=c,Q.plan_validity=e,Q.plan_price=d,Q.coupon_code=null,Q.discount=null,Q.discounted_price=null,H.val(b);var f=p.find(".js-sec-heading"),g=f.find(".js-title"),h=f.find(".js-val");f.find(".js-num");h.fadeOut(0),g.fadeOut(150,function(){f.addClass("option-selected can-change"),g.html(c).fadeIn(300),h.html("Rs. "+d).fadeIn(300)}),m(),setTimeout(function(){j(),p.addClass("collapse"),q.removeClass("collapse"),tpr.segment.setScreenName("upgrade.payment_details."+("cod"==R?"cash_pickup":R)),tpr.segment.sendEvent("ui.viewed",{})},100)}function h(){if(u&&u.length){u.removeClass("is-selected"),p.find(".js-selection-data-wrapper").addClass("hide"),u=null;var a=p.find(".js-sec-heading"),b=a.find(".js-title"),c=a.find(".js-val");a.find(".js-num");c.fadeOut(0),b.fadeOut(150,function(){a.removeClass("option-selected can-change"),b.html("Select Plan").fadeIn(300),c.html("")})}}function i(){w=n.find(".js-btn-enter-coupon"),x=n.find(".js-coupon-entry-block-wrapper"),y=x.find(".js-entry-block"),z=x.find("input[name='coupon_code']"),A=x.find(".js-apply-btn"),B=x.find(".js-error-text"),C=x.find(".js-loading-dots"),D=n.find(".js-coupon-display-block"),E=D.find(".js-coupon-code"),F=D.find(".js-remove-icon"),w.click(function(){k()}),F.click(function(){Q.discount=0,Q.discounted_price=0,Q.coupon_code="",I.val(""),j(),m()}),z.keyup(function(a){a.preventDefault(),a.stopPropagation(),13==a.keyCode&&A.click()}),A.click(function(){function b(a){Q.discount=a.discount,Q.discounted_price=a.discounted_price,I.val(Q.coupon_code),l(),m()}function c(){k(!0)}Q.coupon_code=z.val()||"",Q.coupon_code.length<=0||(tpr.segment.sendEvent("ui.tapped",{ui_element_name:"apply","package":a()}),y.hide(),B.hide(),C.show(),$.ajax({type:"POST",url:tpr.cfg("api_prefix")+"apply-coupon/",data:{coupon_code:Q.coupon_code,plan_id:Q.plan_id},success:function(a){"success"==a.status&&a.discount>0?b(a):c()},error:function(){c()}}))})}function j(){D.hide(),x.hide(),w.show()}function k(a){a?(y.addClass("error"),B.show()):(z.val(""),y.removeClass("error"),B.hide()),w.hide(),C.hide(),D.hide(),y.show(),x.show(),z.focus()}function l(){w.hide(),x.hide(),E.html(Q.coupon_code),D.show()}function m(){M.find(".js-selected-package-title").html(Q.plan_name),M.find(".js-selected-package-validity").html(Q.plan_validity),M.find(".js-selected-package-price").html("Rs. "+Q.plan_price);var a=Q.plan_price;Q.coupon_code&&Q.discount&&Q.discounted_price?(M.find(".js-coupon-discount").html("- Rs. "+Q.discount),a=Q.discounted_price):M.find(".js-coupon-discount").html(""),M.find(".js-total-price").html("Rs. "+a),"cod"===R?N.html("Place Order"):N.html("Pay Now")}var n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q={plan_id:null,plan_name:null,plan_validity:null,plan_price:null,coupon_code:null,discount:null,discounted_price:null},R="online";return{init:b}}(),tpr.mentoringPage=function(){"use strict";function a(){i=$(".js-page-mentoring"),tpr.segment.initModal("mentoring"),d(),h(),b(),c()}function b(){i.find(".js-cancel-booking-btn").click(function(){tpr.track.sendEvent({ga:{category:"Mentoring",action:"Clicked Cancel Booking",label:" "}})})}function c(){swig.setFilter("length",function(a){var b;try{b=a.length}catch(c){b=0}return b})}function d(){i.on("click",".js-star",function(a){var b=$(this).find("input").val(),c=i.find(".js-star");c.removeClass("selected"),c.find("input[value='"+b+"']").parents(".js-star").addClass("selected"),i.find(".js-feedbackNote").show("slide",{direction:"bottom"},100)}),i.on("click",".js-submitFeedback",function(a){var b,c=i.find(".js-enterFeedback"),d=c.find(".js-star").hasClass("selected"),e=c.find(".js-feedbackNoteInput").val(),f=c.data("id"),g=c.find(".js-errorMsg");d&&e.length?(b=c.find(".js-star.selected input").val(),$.ajax({url:"/api/v3/mentoring/rate-call/",method:"POST",data:{rating:b,feedback:e,booking_id:f},beforeSend:function(a){a.setRequestHeader("X-CSRFToken",tpr.config("csrf_token")),g.addClass("hide")},success:function(a,b){"success"==a.status?(i.find(".js-enterFeedback").addClass("hide"),i.find(".js-feedbackSuccess").removeClass("hide")):(g.text(a.msg),g.removeClass("hide"))},error:function(a,b){g.text("Oops! Something went wrong try again later"),g.removeClass("hide")}})):(g.text("*Please  enter rating and feedback"),g.removeClass("hide"))})}function e(a){a.hasClass("selectedBlock")&&a.removeClass("selectedBlock"),i.find(".js-block").removeClass("opened"),a.addClass("opened"),i.find(".js-heading").removeClass("color-blue"),a.find(".js-heading").addClass("color-blue"),i.find(".js-icon-scrollOpen").addClass("hide"),i.find(".js-icon-scroll").removeClass("hide"),a.find(".js-icon-scroll").addClass("hide"),a.find(".js-icon-scrollOpen").removeClass("hide"),a.find(".js-bookingStepsIcon").removeClass("hide"),a.find(".js-bookingStepsIconSelect").addClass("hide")}function f(a){!a.hasClass("opened")&&a.find(".js-dataSelected").text().length&&(a.addClass("selectedBlock"),a.find(".js-bookingStepsIcon").addClass("hide"),a.find(".js-bookingStepsIconSelect").removeClass("hide"))}function g(a){a.hasClass("opened")||a.find(".js-dataSelected").text().length||a.addClass("closed")}function h(){var a,b,c,d=i.find(".js-selectDateBlock"),h=i.find(".js-selectTimeBlock"),j=i.find(".js-confirmBookingBlock"),k=h.find(".js-btn-selectTime"),l="";i.find(".js-datepicker").datetimepicker({lang:"en",format:"d/m/Y",inline:!0,minDate:"+1970/01/2",maxDate:"+1970/01/8",startDate:"+1970/01/2",timepicker:!1,defaultDate:"+1970/01/2",defaultSelect:!0,scrollMonth:!1,scrollTime:!1,scrollInput:!1,onChangeDateTime:function(d,e){l=e.val(),b=l.split("/"),c=["January","February","Maarch","April","May","June","July","August","September","October","November","December"],$.each(c,function(c,d){c===b[1]-1&&(a=d)})}}),setTimeout(function(){$(".xdsoft_today").click()},100),d.on("click",".js-btn-selectDate",function(c){if(""===l)d.find(".js-errorMsg").removeClass("hide");else{d.find(".js-errorMsg").addClass("hide");var g=l.replace(/\//g,""),m=$(this);m.attr("disabled",!0).val("Loading..."),$.ajax({url:"/api/v3/mentoring/slots/",method:"GET",data:{date:g},beforeSend:function(a){a.setRequestHeader("X-CSRFToken",tpr.cfg("csrf_token"))},success:function(c,g){j.addClass("closed"),h.removeClass("closed"),i.find(".js-block").removeClass("selectedBlock");var l=d;l.addClass("selectedBlock"),l.find(".js-bookingStepsIcon").addClass("hide"),l.find(".js-bookingStepsIconSelect").removeClass("hide"),k.addClass("disabled"),m.val("Next").removeAttr("disabled"),d.find(".js-toggleDetails").slideUp(300),h.find(".js-toggleDetails").slideDown(300),d.find(".js-dataSelected").removeClass("hide"),h.find(".js-dataSelected").addClass("hide"),d.find(".js-dataSelected").text(b[0]+" "+a+", "+b[2]),h.find(".js-dataSelected").text("");var n=$(".js-availableSlotsRaw"),o=h.find(".js-availableSlots");o.html(swig.render(n.text(),{locals:c})),o.find(".slotAvailable").length?k.removeClass("hide"):k.addClass("hide"),e(h),f(d)},error:function(a,b){}})}return tpr.segment.sendEvent("ui.tapped",{ui_element_name:"date",body:l}),!1}),d.find(".js-head").on("click",function(a){var b=d.find(".js-dataSelected"),c=h.find(".js-dataSelected");if(!d.hasClass("opened")){b.addClass("hide"),c.removeClass("hide"),i.find(".js-icon-scrollOpen").addClass("hide"),i.find(".js-icon-scroll").removeClass("hide");var k=d;k.find(".js-icon-scroll").addClass("hide"),k.find(".js-icon-scrollOpen").removeClass("hide"),j.addClass("closed"),""===b.text()&&h.addClass("closed"),$(this).closest(".js-block").removeClass("closed"),i.find(".js-toggleDetails").slideUp(300),d.find(".js-toggleDetails").slideDown(300),b.addClass("hide"),e(k),f(h),g(h)}}),h.find(".js-head").on("click",function(a){var b=d.find(".js-dataSelected"),c=h.find(".js-dataSelected");if(!h.hasClass("closed")&&!h.hasClass("opened")&&h.hasClass("selectedBlock")){b.removeClass("hide"),c.addClass("hide");var g=h;g.find(".js-icon-scroll").addClass("hide"),g.find(".js-icon-scrollOpen").removeClass("hide"),j.addClass("closed"),$(this).closest(".js-block").removeClass("closed"),i.find(".js-toggleDetails").slideUp(300),g.find(".js-toggleDetails").slideDown(300),e(g),f(d)}}),h.on("click",".js-slotBlock",function(a){h.find(".js-slotBlock").removeClass("selected"),$(this).addClass("selected"),k.removeClass("disabled")}),h.on("click",".js-btn-selectTime",function(a){var c=h.find(".js-dataSelected");c.removeClass("hide");var d=h;if(h.find(".js-slotBlock").hasClass("selected")){k.val("Loading..."),j.removeClass("closed"),d.addClass("selectedBlock"),d.find(".js-bookingStepsIcon").addClass("hide"),d.find(".js-bookingStepsIconSelect").removeClass("hide");var f=h.find(".selected").text();h.find(".js-toggleDetails").slideUp(300),j.find(".js-toggleDetails").slideDown(300),k.val("Next"),c.text(f),c.removeClass("hide"),j.find(".js-timeBooked").text(f),h.find(".js-errorMsg").addClass("hide"),e(j);var g,i=["JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"];j.find(".js-toggleDetails").find(".js-date").text(b[0]),$.each(i,function(a,c){a===b[1]-1&&(g=c)}),j.find(".js-toggleDetails").find(".js-month").text(g),tpr.segment.sendEvent("ui.tapped",{ui_element_name:"time",body:f})}else h.find(".js-errorMsg").removeClass("hide")}),j.on("click",".js-btn-confirmBooking",function(a){$(".js-slotBlock.selected").text();j.find(".js-phone-errorMsg").hasClass("hide")&&(j.find(".js-btn-confirmBooking").attr("disabled",!0).val("Loading..."),$.ajax({url:"/api/v3/mentoring/slot/book/",method:"POST",data:{date:$(".js-datepicker").val().replace(/\//g,""),slot:$(".js-slotBlock.selected").data("slot"),phone:$(".js-phoneNumEdit").val()||$(".js-phoneNum").text()},beforeSend:function(a){a.setRequestHeader("X-CSRFToken",tpr.cfg("csrf_token"))},success:function(a,b){"success"===a.status?i.find(".js-load").click():j.find(".js-errorMsg").addClass("hide")},error:function(a,b){j.find(".js-errorMsg").removeClass("hide")}}),tpr.track.sendEvent({ga:{category:"Mentoring",action:"Clicked Confirm Booking",label:" "}}))}),j.on("click",".js-changeNumber",function(a){j.find(".js-phoneNumEdit").focus(),$(this).find(".js-phoneNumEdit").removeAttr("readonly")}),j.focusout(".js-phoneNumEdit",function(a){var b=/^((\+[1-9]{1,4}[ \-]*)|(\([0-9]{2,3}\)[ \-]*)|([0-9]{2,4})[ \-]*)*?[0-9]{3,4}?[ \-]*[0-9]{3,4}?$/,c=j.find(".js-phoneNumEdit").val();b.test(c)&&10==c.length?(j.find(".js-phone-errorMsg").addClass("hide"),j.find(".js-phoneNumEdit").attr("readonly")):j.find(".js-phone-errorMsg").removeClass("hide")}),j.find(".js-phoneNumEdit").keypress(function(a){13==a.keyCode&&j.find(".js-phoneNumEdit").focusout()})}var i;return{init:a}}(),$(function(){"use strict";tpr.onClick("test_set_reminder",function(a,b,c){c.phone=tpr.store("profile_phone"),tpr.modal.open({tpl:"modal_test_set_reminder",ctx:c,callback:function(a,b,c){function d(){function a(a){var b="Some error occured. Please try again.";a&&a.error&&(b=a.error),h.hide()}var b=tpr.cfg("api_prefix")+"test-series/set-reminder/",d={test_id:c.test_id,date:f.val(),hour:g.val()};h.show(),$.ajax({type:"POST",url:b,data:d,success:function(b){if(i.hide(),"success"==b.status){var e="We will send you an email/SMS at the selected time to remind you.";j.html(e).show()}else a(b);c.reminder_set=!0,c.remind_on={date:d.date,hour:d.hour};var f=JSON.stringify(c);$.pubsub.publish("test_series.set_reminder",f)},error:function(){a()}})}var e=a.find("form"),f=e.find(".js-date"),g=e.find(".js-time"),h=a.find(".js-loading-overlay"),i=h.find(".js-loading-dots"),j=h.find(".js-response-text"),k=!1;tpr.segment.initModal("reminder"),e.find(".js-select").select2({minimumResultsForSearch:1/0}).on("select2:open",function(a){k||(k=!0,tpr.segment.sendEvent("ui.tapped",{ui_element_name:"select_"+$(this).attr("name")+"_dropdown"}))}).on("change",function(a){tpr.segment.sendEvent("ui.tapped",{ui_element_name:"select_"+$(this).attr("name")+"_selected",body:$(this).val()})}).on("select2:close",function(a){k=!1}),e.validate({rules:{date:{required:!0},time:{required:!0}},messages:{date:{required:"Please select a date"},time:{required:"Please select a time"}},submitHandler:d})}})}),tpr.onClick("test_instructions",function(a,b,c){tpr.modal.open({tpl:"modal_testseries_instructions",ctx:c,callback:function(a,b,c){var d=a.find("form"),e=a.find("input[name='test_solve_url']").val(),f=a.find(".js-loading-overlay");tpr.segment.initModal("ts_test_instructions"),d.submit(function(a){function b(){f.hide()}a.preventDefault(),f.show(),tpr.track.sendEvent({ga:{category:"Test Series",label:"Start Test Button"}}),$.ajax({type:"POST",url:d.attr("action"),data:d.serialize(),success:function(a){"success"==a.status?window.location=e:b()},error:function(){b()}})})}})})}),$(function(){"use strict";tpr.onClick("verify_email",function(a,b,c){var d=tpr.store("profile_email");tpr.modal.open({tpl:"modal_verify_email",ctx:{email:d},callback:function(a,b,c){function d(){e=!1,f.show(),g.hide(),h.show(),window.location.href=window.location.href}var e=!0,f=(a.find("form"),a.find(".js-loading-overlay")),g=f.find(".js-loading-dots"),h=a.find(".js-responseTable"),i=a.find(".js-send-sec"),j=a.find(".js-resend-sec"),k=a.find(".js-send-email"),l=a.find(".js-resend-email");l.click(function(a){a.preventDefault(),k.trigger("click")}),k.click(function(a){a.preventDefault(),f.addClass("is-visible"),$.ajax({type:"POST",url:tpr.cfg("api_prefix")+"profile/send-verification-email/",success:function(a){i.addClass("hide"),f.removeClass("is-visible"),j.removeClass("hide")},error:function(){f.removeClass("is-visible")}})}),function m(){e&&setTimeout(function(){$.ajax({url:tpr.cfg("api_prefix")+"profile/verification-status/",type:"GET",success:function(a){e&&a.is_email_verified&&d()},complete:m,timeout:5e3})},5e3)}(),a.find(".js-md-close").click(function(){e=!1})}})}),tpr.onClick("verify_phone",function(a,b,c){var d=tpr.store("profile_phone"),e=tpr.store("callback_number");tpr.modal.open({tpl:"modal_verify_phone",ctx:{phone:d,callbackNum:e},callback:function(a,b,c){function d(){e=!1,g.show(),h.show(),window.location.href=window.location.href}var e=!0,f=a.find("form"),g=a.find(".js-loading-overlay"),h=a.find(".js-response-text"),i=f.find(".js-send-sms"),j=f.find(".js-submit-code"),k=f.find(".js-loadingDots"),l=f.find(".js-input-code"),m=f.find(".js-send-sms-section"),n=f.find(".js-verify-sms-section"),o=f.find(".js-response-msg");i.click(function(a){m.hide(),n.hide(),k.removeClass("hide"),$.ajax({type:"POST",url:tpr.cfg("api_prefix")+"profile/send-verification-sms/",success:function(a){k.addClass("hide"),n.show(),"success"==a.status&&l.val("")},error:function(){k.addClass("hide"),m.show()}})}),j.click(function(a){function b(a){k.addClass("hide"),n.removeClass("hide");var b="Some error occurred. Try again.";a&&a.message&&(b=a.message),o.removeClass("hide")}a.preventDefault();var c=l.val();c.length&&(n.addClass("hide"),k.removeClass("hide"),$.ajax({type:"POST",url:tpr.cfg("api_prefix")+"profile/verify-sms-code/",data:{verification_code:c},error:function(a){k.addClass("hide"),n.removeClass("hide"),"success"==a.status?d():b(a)},success:function(){b()}}))}),a.find(".js-md-close").click(function(){e=!1}),function p(){e&&setTimeout(function(){$.ajax({url:tpr.cfg("api_prefix")+"profile/verification-status/",type:"GET",success:function(a){e&&a.is_mobile_verified&&d()},complete:p,timeout:5e3})},5e3)}()}})})}),$(function(){"use strict";$.pubsub.subscribe("modal.question.show_hint",function(a,b){tpr.modal.open({tpl:"question_hint",ctx:b.ctx,callback:function(a,c){tpr.web.delayLoadImages(a),MathJax.Hub.Queue(["Typeset",MathJax.Hub,c]),tpr.segment.initModal("hint",{question_id:b.ctx.question_id||"",module:b.ctx.module})}})}),$.pubsub.subscribe("modal.question.show_solution",function(a,b){tpr.modal.open({tpl:"question_solution",ctx:b.ctx,callback:function(a,b,c){tpr.web.delayLoadImages(a),MathJax.Hub.Queue(["Typeset",MathJax.Hub,b]);var d=a.find(".js-rating-option");tpr.segment.initModal("solution",{question_id:c.question_id,module:c.module}),d.click(function(b){function e(){g.removeClass("is-selected"),f.length&&f.addClass("is-selected")}b.preventDefault();var f=a.find(".js-rating-option.is-selected"),g=$(this),h=g.data("rating");d.removeClass("is-selected"),g.addClass("is-selected"),$.ajax({type:"POST",url:tpr.cfg("api_prefix")+"rate-solution/",data:{solution_id:c.solution_id,rating:h},success:function(a){"success"==a.status?c.$question.data("solution_rating",h):e()},error:function(a,b,c){e()}}),tpr.track.sendEvent({ev:{e:"Rated Solution",course_slug:c.course_slug,chapter_slug:c.chapter_slug,subject_slug:c.subject_slug,screen_name:c.screen_name,rating:h},ga:{category:"Question",action:"Rated Solution",label:c.screen_name,value:h}})})}})}),$.pubsub.subscribe("modal.question.report_error",function(a,b){tpr.modal.open({tpl:"question_report_error",ctx:b.ctx,callback:function(a,b,c){function d(){var a=tpr.cfg("api_prefix")+tpr.cfg("course_slug")+"/question/"+c.question_id+"/report-error/",b={error:h.val(),email:g.val()};i.hide(),j.show(),_.has(c,"trk")&&tpr.track.sendEvent(c.trk),$.ajax({type:"POST",url:a,data:b,success:function(a){if("success"==a.status){var b="Thank you for reporting the error.";k.hide(),l.html(b).show()}else e(a)},error:function(a){e(a)}})}function e(a){var b="Sorry, Some error occurred while submitting error. Try again.";a.message&&(b=a.message),k.hide(),i.show(),l.html(b).show()}var f=a.find("form"),g=f.find("input[name='email']"),h=f.find("textarea[name='error']"),i=a.find(".js-btn-retry"),j=a.find(".js-loading-overlay"),k=j.find(".js-loading-dots"),l=j.find(".js-response-text");setTimeout(function(){h.focus()},100),i.on("click",function(){j.hide(),i.hide(),k.show(),l.hide()});var m={question_id:c.question_id};c.module&&(m.module=c.module),tpr.segment.initModal("report_error_for",m),f.validate({rules:{email:{required:!0,email:!0},error:{required:!0}},messages:{email:{required:"Please enter your email address",email:"Please enter a valid email address"},error:{required:"Please enter the error description"}},submitHandler:d})}})}),$.pubsub.subscribe("modal.question.doubts",function(a,b){tpr.modal.open({tpl:"question_doubts",ctx:b.ctx,callback:function(a,c,d){function e(){p=!0,m.addClass("is-focussed"),j.addClass("is-visible")}function f(){m.removeClass("is-focussed"),j.removeClass("is-visible"),p=!1}var g=a.find(".js-loading-overlay"),h=a.find(".js-content-area"),i=a.find(".js-scrollable-area"),j=a.find(".js-mdDoubt-doubtsCover"),k=d.question_id,l=(tpr.segment.getScreenName(),a.find("form")),m=l.find("textarea[name='doubt']"),n=l.find("input[name='anon']");b.label_suffix||"";n.iCheck({checkboxClass:"icheckbox_minimal",radioClass:"iradio_minimal",increaseArea:"20%"}),n.on("ifChecked",function(){tpr.segment.sendEvent("ui.tapped",{ui_element_name:"ask_anonymously",body:"is_now_checked"})}).on("ifUnchecked",function(){tpr.segment.sendEvent("ui.tapped",{ui_element_name:"ask_anonymously",body:"is_now_unchecked"})});var o={question_id:k};d.module&&(o.module=d.module),tpr.segment.initModal("doubt",o);var p=!1;m.focus(function(){e()}),h.on("click",function(a){p&&f()}),l.on("submit",function(a){a.preventDefault();var b=m.val();if(b&&b.length){_.has(d,"trk")&&tpr.track.sendEvent(d.trk),tpr.segment.sendEvent("ui.tapped",{ui_element_name:"submit_doubt"}),g.addClass("is-visible");var e=tpr.cfg("api_prefix")+tpr.cfg("course_slug")+"/question/"+d.question_id+"/ask-doubt/";$.ajax({type:"POST",url:e,data:l.serialize(),success:function(a){"success"==a.status&&a.doubts_html?(m.val(""),n.iCheck("uncheck"),i.html(a.doubts_html),f(),setTimeout(function(){i.animate({scrollTop:i[0].scrollHeight},1),g.removeClass("is-visible"),MathJax.Hub.Queue(["Typeset",MathJax.Hub,c])},300),_.has(d,"trk")&&tpr.track.sendEvent(d.trk)):g.removeClass("is-visible")},error:function(){g.removeClass("is-visible")}})}});var q=tpr.cfg("api_prefix")+tpr.cfg("course_slug")+"/question/"+d.question_id+"/doubts/?format=html";$.ajax({type:"GET",url:q,success:function(a,b,d){var e='<div class="mdDoubt_noDoubtAsked">No doubt asked yet</div>';"success"==a.status&&a.n_doubts&&(e=a.doubts),i.html(e),g.removeClass("is-visible"),MathJax.Hub.Queue(["Typeset",MathJax.Hub,c])},error:function(a,b,c){g.removeClass("is-visible")}})}})})}),$(function(){"use strict";tpr.onClick("upgrade",function(a,b,c){if(c=c||{},!_.has(c,"type")||!_.has(c,"title")){var d=b.attr("url")||!1;return void(d&&(window.location=d))}tpr.modal.open({tpl:"modal_upgrade",ctx:c,callback:function(a,b,d){tpr.segment.initModal("test_upgrade",c.test_status?{ui_context:c.test_status}:{})}})})}),tpr.onboarding=function(){function a(a){c=$(".js-page-onboarding"),d=$(".js-frames-container"),e=c.find(".js-frame"),f=e.length,b()}function b(){function a(a){if(!(a>f||0>a)){var j=100*(a-1);d.css("margin-left","-"+j+"%"),e.removeClass("is-active-frame"),d.find('.js-frame[data-section="'+a+'"]').addClass("is-active-frame"),i.removeClass("is-active"),c.find('.js-dot[data-section="'+a+'"]').addClass("is-active"),1===a?b.hide():b.show(),a===f?(g.hide(),h.show()):(h.hide(),g.show())}}var b=c.find(".js-btn-prev"),g=c.find(".js-btn-next"),h=c.find(".js-btn-finish"),i=c.find(".js-dot");b.click(function(b){var d=c.find(".is-active-frame"),e=d.data("section");a(e-1)}),g.click(function(b){var d=c.find(".is-active-frame"),e=d.data("section");a(e+1)}),i.click(function(){var b=$(this),c=b.data("section");a(c)})}var c,d,e,f;return{init:a}}(),tpr.followSuggestions=function(){function a(a){var b=a.$wrapper||!1,c=a.count||6,d=a.ui_source||!1,e=a.source_id||!1;if(b&&d&&e){var f=a.ev_source||"unknown",g=tpr.cfg("api_prefix")+"suggested-friends/"+d+"/"+e+"/";$.ajax({type:"GET",url:g,cache:!1,success:function(a){if("success"==a.status){var d='<h2 class="heading-bordered h3">Suggested Topprs to Follow</h2>';if(!a.suggested_friends||a.suggested_friends.length<=0)return;c=Math.min(a.suggested_friends.length,c),$.each(a.suggested_friends,function(a,b){return a==c?!1:void(b.in_classroom||(_.extend(b,{ev_source:f}),d+=toppr.tpl.build("friend_suggestion_item",b)))}),b.html(d)}}})}}return{get:a}}(),tpr.onClick("follow",function(a,b,c){function d(){b.removeClass("is-followed").addClass("-ct").unbind("mouseleave")}var e,f;b.find(".js-btn-overlay").length||(b.hasClass("is-followed")?(b.removeClass("is-followed can-unfollow"),tpr.track.sendEvent({ga:{category:"Networks",action:"Unfollowed a User",label:c.ev_source}}),f={ui_element_name:"unfollow",user_profile:c.user_id},c.ui_context&&(f.ui_context=c.ui_context),tpr.segment.sendEvent("ui.tapped",f),b.append("<div class='followBtn-overlay can-unfollow js-btn-overlay'>"+tpr.tpl.build("loading_dots",{size:10})+"</div>"),e=tpr.cfg("api_prefix")+"profile/"+c.user_id+"/unfollow/",$.ajax({type:"POST",url:e,success:function(a){"success"==a.status?$.pubsub.publish("user_unfollowed",{id:c.user_id}):b.addClass("is-followed can-unfollow")},error:function(){b.addClass("is-followed can-unfollow")}})):(b.addClass("is-followed"),b.removeClass("-ct"),head.mobile?b.addClass("can-unfollow -ct"):b.one("mouseleave",function(){b.addClass("can-unfollow -ct")}),tpr.track.sendEvent({ev:{e:"Followed User",activity_name:c.ev_source||"unknown"},ga:{category:"Networks",action:"Followed a User",label:c.ev_source}}),f={ui_element_name:"follow",user_profile:c.user_id},c.ui_context&&(f.ui_context=c.ui_context),tpr.segment.sendEvent("ui.tapped",f),b.append("<div class='followBtn-overlay is-followed js-btn-overlay'>"+tpr.tpl.build("loading_dots",{size:10})+"</div>"),e=tpr.cfg("api_prefix")+"profile/"+c.user_id+"/follow/",$.ajax({type:"POST",url:e,success:function(a){"success"==a.status?$.pubsub.publish("user_followed",{id:c.user_id}):d()},error:function(){d()}})),setTimeout(function(){b.find(".js-btn-overlay").remove()},1e3))}),$(function(){var a=$(document),b=".js-filters-trigger",c=".js-asideModal",d=".-js-close-asideModal";a.on("click",b,function(){var a=$("#page_content_wrapper");a.find(c).addClass("is-visible")}),a.on("click",d,function(){var a=$("#page_content_wrapper");a.find(c).removeClass("is-visible")})}),tpr.web=function(){"use strict";function a(){i.addClass("is-visible"),f.addClass("open")}function b(){f.removeClass("open"),i.removeClass("is-visible")}function c(a){g.find("li.active").removeClass("active");var b=g.find("li[data-tab='"+a+"']");b.length&&b.addClass("active")}function d(){var a=$("#page_content_wrapper").find(".js-page-tabs-wrapper");if(a.length){var b=a.offset().top,c=$(".pHeader").find(".tab_overlay");$(window).scroll(function(){$(document).scrollTop()>b?a.hasClass("fixed")||(a.addClass("fixed"),c.addClass("fixed")):(a.removeClass("fixed"),c.removeClass("fixed"))})}}function e(a){var b=a.find(".js-delay-load-img");b.each(function(){var a=$(this);if(!a.data("processing")&&!a.data("loaded")){a.data("processing",!0);var b=a.parent().find(".js-delay-load-placeholder"),c=a.data("src"),d=new Image;d.onload=function(){a.attr("src",c).data("loaded",!0).parent().addClass("loaded"),b.remove()},d.onerror=function(){a.attr("src",c).data("loaded",!0).parent().addClass("loaded"),b.remove()},d.src=c}})}var f,g,h,i;return $(function(){function c(){k.addClass("open"),l.show()}function d(){k.removeClass("open"),l.hide()}f=$(".js-main-sidebar"),g=f.find(".js-main-sidebar-content-block");var e=$(".js-user-dropdown"),j=e.find(".js-trigger"),k=e.find(".js-dropdown"),l=$("#page_click_intercept_overlay");j.click(function(a){k.hasClass("open")?d():c()}),l.click(d),k.on("click","a",d),g.on("click","li a",function(a){var b=$(a.target).closest("li");g.find("li.active").removeClass("active"),b.addClass("active")}),h=$(".js-hamburger-menu"),i=$(".js-main-sidebar-overlay"),h.click(a),i.click(b)}),$(d),{fixPageTabsOnScroll:d,setActiveSidebarTab:c,delayLoadImages:e,openSidebar:a,closeSidebar:b}}();
//# sourceMappingURL=tpr.web.map